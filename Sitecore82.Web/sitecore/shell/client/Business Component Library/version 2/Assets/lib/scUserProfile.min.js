(function(){require.config({paths:{session:"/sitecore/shell/client/Business Component Library/version 2/Assets/lib/scSession"}});define("userProfile",["session"],function(){var t=typeof window!="undefined",u=t?window:global,n=u.Sitecore.Speak,i={userProfileApiUrl:"/api/sitecore/Settings/",userProfileApiUpdateMethod:"SetUserProfileKey"},r=function(t,i){if(t.statusCode&&t.statusCode===401||t.status&&t.status===401){var r=n.module("session");r.unauthorized();return}i&&i(t)},f=function(t,u,f){if(!t)throw new Error("Please provide a valid userProfileKey");if(u&&!n.utils.is.an.object(u))throw new Error("Please provide a valid state to the UserProfileState property - the state must be an object");var s=JSON.stringify(u),e=n.utils.security.antiForgery.getAntiForgeryToken(),o={url:i.userProfileApiUrl+i.userProfileApiUpdateMethod,type:"POST",dataType:"text",data:{key:t,value:s}};o.data[e.formKey]=e.value;$.ajax(o).done(function(n){r(n,f)}).fail(function(n){r(n)})};t&&Sitecore?Sitecore.Speak.module("userProfile",{saveState:f}):exports=module.exports=UserProfile})})();