!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.speakItem=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}b.exports=d},{}],2:[function(a,b,c){function d(a){var b=a?a.length:0;return b?a[b-1]:void 0}b.exports=d},{}],3:[function(a,b,c){function d(a,b,c){var d=h(a)?e:g;return b=f(b,c,3),d(a,b)}var e=a("../internal/arrayFilter"),f=a("../internal/baseCallback"),g=a("../internal/baseFilter"),h=a("../lang/isArray");b.exports=d},{"../internal/arrayFilter":7,"../internal/baseCallback":11,"../internal/baseFilter":13,"../lang/isArray":51}],4:[function(a,b,c){var d=a("../internal/baseEach"),e=a("../internal/createFind"),f=e(d);b.exports=f},{"../internal/baseEach":12,"../internal/createFind":33}],5:[function(a,b,c){function d(a,b,c){var d=h(a)?e:g;return b=f(b,c,3),d(a,b)}var e=a("../internal/arrayMap"),f=a("../internal/baseCallback"),g=a("../internal/baseMap"),h=a("../lang/isArray");b.exports=d},{"../internal/arrayMap":8,"../internal/baseCallback":11,"../internal/baseMap":22,"../lang/isArray":51}],6:[function(a,b,c){var d=a("../internal/arrayReduce"),e=a("../internal/baseEach"),f=a("../internal/createReduce"),g=f(d,e);b.exports=g},{"../internal/arrayReduce":9,"../internal/baseEach":12,"../internal/createReduce":34}],7:[function(a,b,c){function d(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}b.exports=d},{}],8:[function(a,b,c){function d(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}b.exports=d},{}],9:[function(a,b,c){function d(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}b.exports=d},{}],10:[function(a,b,c){function d(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}b.exports=d},{}],11:[function(a,b,c){function d(a,b,c){var d=typeof a;return"function"==d?void 0===b?a:g(a,b,c):null==a?h:"object"==d?e(a):void 0===b?i(a):f(a,b)}var e=a("./baseMatches"),f=a("./baseMatchesProperty"),g=a("./bindCallback"),h=a("../utility/identity"),i=a("../utility/property");b.exports=d},{"../utility/identity":60,"../utility/property":61,"./baseMatches":23,"./baseMatchesProperty":24,"./bindCallback":30}],12:[function(a,b,c){var d=a("./baseForOwn"),e=a("./createBaseEach"),f=e(d);b.exports=f},{"./baseForOwn":17,"./createBaseEach":31}],13:[function(a,b,c){function d(a,b){var c=[];return e(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}var e=a("./baseEach");b.exports=d},{"./baseEach":12}],14:[function(a,b,c){function d(a,b,c,d){var e;return c(a,function(a,c,f){return b(a,c,f)?(e=d?c:a,!1):void 0}),e}b.exports=d},{}],15:[function(a,b,c){function d(a,b,c){for(var d=a.length,e=c?d:-1;c?e--:++e<d;)if(b(a[e],e,a))return e;return-1}b.exports=d},{}],16:[function(a,b,c){var d=a("./createBaseFor"),e=d();b.exports=e},{"./createBaseFor":32}],17:[function(a,b,c){function d(a,b){return e(a,b,f)}var e=a("./baseFor"),f=a("../object/keys");b.exports=d},{"../object/keys":57,"./baseFor":16}],18:[function(a,b,c){function d(a,b,c){if(null!=a){void 0!==c&&c in e(a)&&(b=[c]);for(var d=0,f=b.length;null!=a&&f>d;)a=a[b[d++]];return d&&d==f?a:void 0}}var e=a("./toObject");b.exports=d},{"./toObject":48}],19:[function(a,b,c){function d(a,b,c,h,i,j){return a===b?!0:null==a||null==b||!f(a)&&!g(b)?a!==a&&b!==b:e(a,b,d,c,h,i,j)}var e=a("./baseIsEqualDeep"),f=a("../lang/isObject"),g=a("./isObjectLike");b.exports=d},{"../lang/isObject":54,"./baseIsEqualDeep":20,"./isObjectLike":45}],20:[function(a,b,c){function d(a,b,c,d,m,p,q){var r=h(a),s=h(b),t=k,u=k;r||(t=o.call(a),t==j?t=l:t!=l&&(r=i(a))),s||(u=o.call(b),u==j?u=l:u!=l&&(s=i(b)));var v=t==l,w=u==l,x=t==u;if(x&&!r&&!v)return f(a,b,t);if(!m){var y=v&&n.call(a,"__wrapped__"),z=w&&n.call(b,"__wrapped__");if(y||z)return c(y?a.value():a,z?b.value():b,d,m,p,q)}if(!x)return!1;p||(p=[]),q||(q=[]);for(var A=p.length;A--;)if(p[A]==a)return q[A]==b;p.push(a),q.push(b);var B=(r?e:g)(a,b,c,d,m,p,q);return p.pop(),q.pop(),B}var e=a("./equalArrays"),f=a("./equalByTag"),g=a("./equalObjects"),h=a("../lang/isArray"),i=a("../lang/isTypedArray"),j="[object Arguments]",k="[object Array]",l="[object Object]",m=Object.prototype,n=m.hasOwnProperty,o=m.toString;b.exports=d},{"../lang/isArray":51,"../lang/isTypedArray":56,"./equalArrays":35,"./equalByTag":36,"./equalObjects":37}],21:[function(a,b,c){function d(a,b,c){var d=b.length,g=d,h=!c;if(null==a)return!g;for(a=f(a);d--;){var i=b[d];if(h&&i[2]?i[1]!==a[i[0]]:!(i[0]in a))return!1}for(;++d<g;){i=b[d];var j=i[0],k=a[j],l=i[1];if(h&&i[2]){if(void 0===k&&!(j in a))return!1}else{var m=c?c(k,l,j):void 0;if(!(void 0===m?e(l,k,c,!0):m))return!1}}return!0}var e=a("./baseIsEqual"),f=a("./toObject");b.exports=d},{"./baseIsEqual":19,"./toObject":48}],22:[function(a,b,c){function d(a,b){var c=-1,d=f(a)?Array(a.length):[];return e(a,function(a,e,f){d[++c]=b(a,e,f)}),d}var e=a("./baseEach"),f=a("./isArrayLike");b.exports=d},{"./baseEach":12,"./isArrayLike":41}],23:[function(a,b,c){function d(a){var b=f(a);if(1==b.length&&b[0][2]){var c=b[0][0],d=b[0][1];return function(a){return null==a?!1:a[c]===d&&(void 0!==d||c in g(a))}}return function(a){return e(a,b)}}var e=a("./baseIsMatch"),f=a("./getMatchData"),g=a("./toObject");b.exports=d},{"./baseIsMatch":21,"./getMatchData":39,"./toObject":48}],24:[function(a,b,c){function d(a,b){var c=h(a),d=i(a)&&j(b),n=a+"";return a=m(a),function(h){if(null==h)return!1;var i=n;if(h=l(h),(c||!d)&&!(i in h)){if(h=1==a.length?h:e(h,g(a,0,-1)),null==h)return!1;i=k(a),h=l(h)}return h[i]===b?void 0!==b||i in h:f(b,h[i],void 0,!0)}}var e=a("./baseGet"),f=a("./baseIsEqual"),g=a("./baseSlice"),h=a("../lang/isArray"),i=a("./isKey"),j=a("./isStrictComparable"),k=a("../array/last"),l=a("./toObject"),m=a("./toPath");b.exports=d},{"../array/last":2,"../lang/isArray":51,"./baseGet":18,"./baseIsEqual":19,"./baseSlice":28,"./isKey":43,"./isStrictComparable":46,"./toObject":48,"./toPath":49}],25:[function(a,b,c){function d(a){return function(b){return null==b?void 0:b[a]}}b.exports=d},{}],26:[function(a,b,c){function d(a){var b=a+"";return a=f(a),function(c){return e(c,a,b)}}var e=a("./baseGet"),f=a("./toPath");b.exports=d},{"./baseGet":18,"./toPath":49}],27:[function(a,b,c){function d(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}b.exports=d},{}],28:[function(a,b,c){function d(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c=void 0===c||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Array(e);++d<e;)f[d]=a[d+b];return f}b.exports=d},{}],29:[function(a,b,c){function d(a){return null==a?"":a+""}b.exports=d},{}],30:[function(a,b,c){function d(a,b,c){if("function"!=typeof a)return e;if(void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}var e=a("../utility/identity");b.exports=d},{"../utility/identity":60}],31:[function(a,b,c){function d(a,b){return function(c,d){var h=c?e(c):0;if(!f(h))return a(c,d);for(var i=b?h:-1,j=g(c);(b?i--:++i<h)&&d(j[i],i,j)!==!1;);return c}}var e=a("./getLength"),f=a("./isLength"),g=a("./toObject");b.exports=d},{"./getLength":38,"./isLength":44,"./toObject":48}],32:[function(a,b,c){function d(a){return function(b,c,d){for(var f=e(b),g=d(b),h=g.length,i=a?h:-1;a?i--:++i<h;){var j=g[i];if(c(f[j],j,f)===!1)break}return b}}var e=a("./toObject");b.exports=d},{"./toObject":48}],33:[function(a,b,c){function d(a,b){return function(c,d,i){if(d=e(d,i,3),h(c)){var j=g(c,d,b);return j>-1?c[j]:void 0}return f(c,d,a)}}var e=a("./baseCallback"),f=a("./baseFind"),g=a("./baseFindIndex"),h=a("../lang/isArray");b.exports=d},{"../lang/isArray":51,"./baseCallback":11,"./baseFind":14,"./baseFindIndex":15}],34:[function(a,b,c){function d(a,b){return function(c,d,h,i){var j=arguments.length<3;return"function"==typeof d&&void 0===i&&g(c)?a(c,d,h,j):f(c,e(d,i,4),h,j,b)}}var e=a("./baseCallback"),f=a("./baseReduce"),g=a("../lang/isArray");b.exports=d},{"../lang/isArray":51,"./baseCallback":11,"./baseReduce":27}],35:[function(a,b,c){function d(a,b,c,d,f,g,h){var i=-1,j=a.length,k=b.length;if(j!=k&&!(f&&k>j))return!1;for(;++i<j;){var l=a[i],m=b[i],n=d?d(f?m:l,f?l:m,i):void 0;if(void 0!==n){if(n)continue;return!1}if(f){if(!e(b,function(a){return l===a||c(l,a,d,f,g,h)}))return!1}else if(l!==m&&!c(l,m,d,f,g,h))return!1}return!0}var e=a("./arraySome");b.exports=d},{"./arraySome":10}],36:[function(a,b,c){function d(a,b,c){switch(c){case e:case f:return+a==+b;case g:return a.name==b.name&&a.message==b.message;case h:return a!=+a?b!=+b:a==+b;case i:case j:return a==b+""}return!1}var e="[object Boolean]",f="[object Date]",g="[object Error]",h="[object Number]",i="[object RegExp]",j="[object String]";b.exports=d},{}],37:[function(a,b,c){function d(a,b,c,d,f,h,i){var j=e(a),k=j.length,l=e(b),m=l.length;if(k!=m&&!f)return!1;for(var n=k;n--;){var o=j[n];if(!(f?o in b:g.call(b,o)))return!1}for(var p=f;++n<k;){o=j[n];var q=a[o],r=b[o],s=d?d(f?r:q,f?q:r,o):void 0;if(!(void 0===s?c(q,r,d,f,h,i):s))return!1;p||(p="constructor"==o)}if(!p){var t=a.constructor,u=b.constructor;if(t!=u&&"constructor"in a&&"constructor"in b&&!("function"==typeof t&&t instanceof t&&"function"==typeof u&&u instanceof u))return!1}return!0}var e=a("../object/keys"),f=Object.prototype,g=f.hasOwnProperty;b.exports=d},{"../object/keys":57}],38:[function(a,b,c){var d=a("./baseProperty"),e=d("length");b.exports=e},{"./baseProperty":25}],39:[function(a,b,c){function d(a){for(var b=f(a),c=b.length;c--;)b[c][2]=e(b[c][1]);return b}var e=a("./isStrictComparable"),f=a("../object/pairs");b.exports=d},{"../object/pairs":59,"./isStrictComparable":46}],40:[function(a,b,c){function d(a,b){var c=null==a?void 0:a[b];return e(c)?c:void 0}var e=a("../lang/isNative");b.exports=d},{"../lang/isNative":53}],41:[function(a,b,c){function d(a){return null!=a&&f(e(a))}var e=a("./getLength"),f=a("./isLength");b.exports=d},{"./getLength":38,"./isLength":44}],42:[function(a,b,c){function d(a,b){return a="number"==typeof a||e.test(a)?+a:-1,b=null==b?f:b,a>-1&&a%1==0&&b>a}var e=/^\d+$/,f=9007199254740991;b.exports=d},{}],43:[function(a,b,c){function d(a,b){var c=typeof a;if("string"==c&&h.test(a)||"number"==c)return!0;if(e(a))return!1;var d=!g.test(a);return d||null!=b&&a in f(b)}var e=a("../lang/isArray"),f=a("./toObject"),g=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,h=/^\w*$/;b.exports=d},{"../lang/isArray":51,"./toObject":48}],44:[function(a,b,c){function d(a){return"number"==typeof a&&a>-1&&a%1==0&&e>=a}var e=9007199254740991;b.exports=d},{}],45:[function(a,b,c){function d(a){return!!a&&"object"==typeof a}b.exports=d},{}],46:[function(a,b,c){function d(a){return a===a&&!e(a)}var e=a("../lang/isObject");b.exports=d},{"../lang/isObject":54}],47:[function(a,b,c){function d(a){for(var b=i(a),c=b.length,d=c&&a.length,j=!!d&&h(d)&&(f(a)||e(a)),l=-1,m=[];++l<c;){var n=b[l];(j&&g(n,d)||k.call(a,n))&&m.push(n)}return m}var e=a("../lang/isArguments"),f=a("../lang/isArray"),g=a("./isIndex"),h=a("./isLength"),i=a("../object/keysIn"),j=Object.prototype,k=j.hasOwnProperty;b.exports=d},{"../lang/isArguments":50,"../lang/isArray":51,"../object/keysIn":58,"./isIndex":42,"./isLength":44}],48:[function(a,b,c){function d(a){return e(a)?a:Object(a)}var e=a("../lang/isObject");b.exports=d},{"../lang/isObject":54}],49:[function(a,b,c){function d(a){if(f(a))return a;var b=[];return e(a).replace(g,function(a,c,d,e){b.push(d?e.replace(h,"$1"):c||a)}),b}var e=a("./baseToString"),f=a("../lang/isArray"),g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,h=/\\(\\)?/g;b.exports=d},{"../lang/isArray":51,"./baseToString":29}],50:[function(a,b,c){function d(a){return f(a)&&e(a)&&h.call(a,"callee")&&!i.call(a,"callee")}var e=a("../internal/isArrayLike"),f=a("../internal/isObjectLike"),g=Object.prototype,h=g.hasOwnProperty,i=g.propertyIsEnumerable;b.exports=d},{"../internal/isArrayLike":41,"../internal/isObjectLike":45}],51:[function(a,b,c){var d=a("../internal/getNative"),e=a("../internal/isLength"),f=a("../internal/isObjectLike"),g="[object Array]",h=Object.prototype,i=h.toString,j=d(Array,"isArray"),k=j||function(a){return f(a)&&e(a.length)&&i.call(a)==g};b.exports=k},{"../internal/getNative":40,"../internal/isLength":44,"../internal/isObjectLike":45}],52:[function(a,b,c){function d(a){return e(a)&&h.call(a)==f}var e=a("./isObject"),f="[object Function]",g=Object.prototype,h=g.toString;b.exports=d},{"./isObject":54}],53:[function(a,b,c){function d(a){return null==a?!1:e(a)?k.test(i.call(a)):f(a)&&g.test(a)}var e=a("./isFunction"),f=a("../internal/isObjectLike"),g=/^\[object .+?Constructor\]$/,h=Object.prototype,i=Function.prototype.toString,j=h.hasOwnProperty,k=RegExp("^"+i.call(j).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");b.exports=d},{"../internal/isObjectLike":45,"./isFunction":52}],54:[function(a,b,c){function d(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}b.exports=d},{}],55:[function(a,b,c){function d(a){return"string"==typeof a||e(a)&&h.call(a)==f}var e=a("../internal/isObjectLike"),f="[object String]",g=Object.prototype,h=g.toString;b.exports=d},{"../internal/isObjectLike":45}],56:[function(a,b,c){function d(a){return f(a)&&e(a.length)&&!!D[F.call(a)]}var e=a("../internal/isLength"),f=a("../internal/isObjectLike"),g="[object Arguments]",h="[object Array]",i="[object Boolean]",j="[object Date]",k="[object Error]",l="[object Function]",m="[object Map]",n="[object Number]",o="[object Object]",p="[object RegExp]",q="[object Set]",r="[object String]",s="[object WeakMap]",t="[object ArrayBuffer]",u="[object Float32Array]",v="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",y="[object Int32Array]",z="[object Uint8Array]",A="[object Uint8ClampedArray]",B="[object Uint16Array]",C="[object Uint32Array]",D={};D[u]=D[v]=D[w]=D[x]=D[y]=D[z]=D[A]=D[B]=D[C]=!0,D[g]=D[h]=D[t]=D[i]=D[j]=D[k]=D[l]=D[m]=D[n]=D[o]=D[p]=D[q]=D[r]=D[s]=!1;var E=Object.prototype,F=E.toString;b.exports=d},{"../internal/isLength":44,"../internal/isObjectLike":45}],57:[function(a,b,c){var d=a("../internal/getNative"),e=a("../internal/isArrayLike"),f=a("../lang/isObject"),g=a("../internal/shimKeys"),h=d(Object,"keys"),i=h?function(a){var b=null==a?void 0:a.constructor;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&e(a)?g(a):f(a)?h(a):[]}:g;b.exports=i},{"../internal/getNative":40,"../internal/isArrayLike":41,"../internal/shimKeys":47,"../lang/isObject":54}],58:[function(a,b,c){function d(a){if(null==a)return[];i(a)||(a=Object(a));var b=a.length;b=b&&h(b)&&(f(a)||e(a))&&b||0;for(var c=a.constructor,d=-1,j="function"==typeof c&&c.prototype===a,l=Array(b),m=b>0;++d<b;)l[d]=d+"";for(var n in a)m&&g(n,b)||"constructor"==n&&(j||!k.call(a,n))||l.push(n);return l}var e=a("../lang/isArguments"),f=a("../lang/isArray"),g=a("../internal/isIndex"),h=a("../internal/isLength"),i=a("../lang/isObject"),j=Object.prototype,k=j.hasOwnProperty;b.exports=d},{"../internal/isIndex":42,"../internal/isLength":44,"../lang/isArguments":50,"../lang/isArray":51,"../lang/isObject":54}],59:[function(a,b,c){function d(a){a=f(a);for(var b=-1,c=e(a),d=c.length,g=Array(d);++b<d;){var h=c[b];g[b]=[h,a[h]]}return g}var e=a("./keys"),f=a("../internal/toObject");b.exports=d},{"../internal/toObject":48,"./keys":57}],60:[function(a,b,c){function d(a){return a}b.exports=d},{}],61:[function(a,b,c){function d(a){return g(a)?e(a):f(a)}var e=a("../internal/baseProperty"),f=a("../internal/basePropertyDeep"),g=a("../internal/isKey");b.exports=d},{"../internal/baseProperty":25,"../internal/basePropertyDeep":26,"../internal/isKey":43}],62:[function(a,b,c){b.exports={options:function(a,b){return{dataType:"json",type:a,data:b}},convertResponse:function(a){return 200!==a.statusCode?$.Deferred().reject({readyState:4,status:a.statusCode,responseText:a.error.message}):a.result},triggerCreated:function(a){return _sc.trigger("item:created",a),a},get:function(a){return $.ajax({url:a,dataType:"JSON"})}}},{}],63:[function(a,b,c){var d=a("lodash/lang/isString");b.exports={isId:function(a){return d(a)?/^\{?[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\}?$/i.test(a):!1}}},{"lodash/lang/isString":55}],64:[function(a,b,c){var d=a("../model/item"),e=function(a){if(!a.result)return console.debug("ERROR: No data from server"),{items:[],totalCount:0,data:a};if(!a.result.items)return console.debug("ERROR: No items from server"),{items:[],totalCount:0,data:a};var b=[];return a.result.items.forEach(function(a){b.push(new d(a))}),{items:b,total:a.result.totalCount,data:a.result}},f=function(a){var b={item:null,data:a};return a.result?a.result.items?0===a.result.items.length?b:a.result.items.length>1?(console.debug("ERROR: Expected a single item"),b):(b.item=new d(a.result.items[0]),b):(console.debug("ERROR: No items from server"),b):(console.debug("ERROR: No data from server"),b)};b.exports={convertToItem:f,convertToItems:e}},{"../model/item":74}],65:[function(a,b,c){var d=a("./urlHelper"),e=a("lodash/array/compact"),f=a("lodash/lang/isString"),g=a("lodash/lang/isArray"),h=a("lodash/collection/map"),i=a("./idHelper"),j=function(a){switch(a){case"self":return"s";case"children":return"c";case"parent":return"p";default:throw"Unsupported scope. It must be either 'self', 'children' or 'parent'"}},k=function(a,b){if(b&&g(b)){var c=e(h(b,j)).join("|");a=d.addQueryParameters(a,{scope:c})}return a},l=function(a,b){return b&&f(b)&&(a=d.addQueryParameters(a,{sc_database:b})),a},m=function(a,b){return b&&f(b)&&(a=d.addQueryParameters(a,{sc_content:b})),a},n=function(a,b,c){return b&&f(b)&&(c&&c.facetsRootItemId&&(a=d.addQueryParameters(a,{facetsRootItemId:c.facetsRootItemId})),0===b.indexOf("search:")?(a=d.addQueryParameters(a,{search:b.substr("search:".length)}),c&&c.root&&i.isId(c.root)&&(a=d.addQueryParameters(a,{root:c.root})),c&&c.searchConfig&&(a=d.addQueryParameters(a,{searchConfig:c.searchConfig}))):a=0===b.indexOf("query:")?d.addQueryParameters(a,{query:b.substr("query:".length)}):i.isId(b)?d.addQueryParameters(a,{sc_itemid:b}):d.combine(a,b)),a},o=function(a,b){return b&&(a=d.addQueryParameters(a,{language:b})),a},p=function(a,b){return b&&(a=d.addQueryParameters(a,{sc_itemversion:b})),a},q=function(a,b){b=b||{};var c="/-/item/v1",e="";b.webApi&&(c=b.webApi),b.virtualFolder&&(e=b.virtualFolder);var f=d.combine(c,e);return f=n(f,a,b),b.scope&&(f=k(f,b.scope)),b.database&&""!==a&&0===a.indexOf("search:")?f=m(f,b.database):b.database&&(f=l(f,b.database)),b.language&&(f=o(f,b.language)),b.version&&(f=p(f,b.version)),b.payLoad&&(f=d.addQueryParameters(f,{payload:"full"})),b.formatting&&(f=d.addQueryParameters(f,{format:b.formatting})),b.sorting&&(f=d.addQueryParameters(f,{sorting:b.sorting})),b.showHiddenItems&&(f=d.addQueryParameters(f,{showHiddenItems:b.showHiddenItems})),b.fields&&(f=d.addQueryParameters(f,{fields:b.fields.join("|")})),b.pageSize&&b.pageSize>0&&(f=d.addQueryParameters(f,{pageIndex:b.pageIndex,pageSize:b.pageSize})),f};b.exports={buildUrl:q,getUrl:function(a,b,c){c=c||{},c.database||(c.database=b.databaseName),c.webApi||(c.webApi=b.webApi),c.virtualFolder||(c.virtualFolder=b.virtualFolder);var d=q(a,c);return d}}},{"./idHelper":63,"./urlHelper":66,"lodash/array/compact":1,"lodash/collection/map":5,"lodash/lang/isArray":51,"lodash/lang/isString":55}],66:[function(a,b,c){var d=a("lodash/collection/reduce"),e=a("lodash/array/compact"),f=a("lodash/object/pairs"),g=function(a,b){return a.indexOf("?"+b+"=")>=0||a.indexOf("&"+b+"=")>=0};b.exports={combine:function(){if(0===arguments.length)return"";var a=d(arguments,function(a,b){return b?a+"/"+e(b.split("/")).join("/"):a});return a?0===a.indexOf("/")?a:"/"+a:""},isParameterNameAlreadyInUrl:g,addQueryParameters:function(a,b){var c,d=f(b),e="([\\?&])({{param}}=[^&]+)",h=a;return d.forEach(function(a){g(h,a[0])?(c=new RegExp(e.replace("{{param}}",encodeURIComponent(a[0])),"i"),h=h.replace(c,"$1"+a[0]+"="+a[1])):(h=h+=~h.indexOf("?")?"&":"?",h+=encodeURIComponent(a[0])+"="+encodeURIComponent(a[1]))}),h},getQueryParameters:function(a){var b,c={};return a?(b=a.split("?"),(b=b.length>1?b[1].split("&"):b[0].split("&"))?(b.forEach(function(a){var b=a.split("=");2===b.length&&(c[b[0]]=decodeURIComponent(b[1].replace(/\+/g," ")))}),c):void 0):c}}},{"lodash/array/compact":1,"lodash/collection/reduce":6,"lodash/object/pairs":59}],67:[function(a,b,c){var d=a("./model/databaseUri"),e=a("./model/database");a("./helpers/itemWebApiUrlHelper");b.exports={search:function(a,b){a="string"==typeof a||a instanceof String?{searchText:a}:a||{};var c=new d(a.database),f=new e(c);return f.search(a.searchText,b,a)},query:function(a,b){a="string"==typeof a||a instanceof String?{query:a}:a||{};var c=new d(a.database),f=new e(c);return f.query(a.query,b,a)},fetch:function(a,b,c){var f,g;arguments.length<3?(g=b,f={}):(f=b,g=c);var h=new d(f.database),i=new e(h);return i.fetch(a,g,f)},fetchChildren:function(a,b,c){var f,g;2===arguments.length?(g=b,f={}):(f=b,g=c);var h=new d(f.database),i=new e(h);return i.fetchChildren(a,g,f)},create:a("./repo").create}},{"./helpers/itemWebApiUrlHelper":65,"./model/database":70,"./model/databaseUri":71,"./repo":75}],68:[function(a,b,c){var d=function(a,b){if(!a)throw"Parameter 'databaseUri' is null or empty";if(!b)throw"Parameter 'itemId' is null or empty";this.databaseUri=a,this.itemId=b};d.prototype.getDatabaseName=function(){return this.databaseUri.databaseName},d.prototype.getDatabaseUri=function(){return this.databaseUri},d.prototype.getItemId=function(){return this.itemId},b.exports=d},{}],69:[function(a,b,c){var d=function(a,b,c){if(!a)throw"Parameter 'itemUri' is null";if(!b)throw"Parameter 'language' is null or empty";if(!_.isNumber(c))throw"Parameter 'version' is null or not a number";this.itemUri=a,this.language=b,this.version=c};d.prototype.getDatabaseUri=function(){return this.itemUri.getDatabaseUri()},d.prototype.getDatabaseName=function(){return this.itemUri.getDatabaseName()},d.prototype.getItemId=function(){return this.itemUri.getItemId()},b.exports=d},{}],70:[function(a,b,c){var d=a("../helpers/itemWebApiUrlHelper"),e=a("../helpers/itemHelper"),f=a("../helpers/ajaxHelper"),g=a("./ItemUri"),h=a("./ItemVersionUri"),i=function(){},j=function(a){if(!a)throw"Parameter 'databaseUri' is null";this.databaseUri=a};j.prototype.fetch=function(a,b,c){if(!a)throw"Parameter 'id' is null";c=c||{},b=b||i,a instanceof g&&(c.database=a.getDatabaseName(),a=a.getItemId()),a instanceof h&&(c.database=a.getDatabaseName(),c.language=a.getLanguage(),c.version=a.getVersion(),a=a.getItemId());var j=d.getUrl(a,this.databaseUri,c);return c.scope&&(_.contains(c.scope,"parent")||_.contains(c.scope,"children"))?f.get(j).pipe(e.convertToItems).then(b):f.get(j).pipe(e.convertToItem).then(function(a){b(a.item,a.data)})},j.prototype.search=function(a,b,c){if(!a&&!c.root&&!c.searchConfig)throw new Error("No search parameters has been passed");b=b||i;var g=d.getUrl("search:"+a,this.databaseUri,c);return f.get(g).pipe(e.convertToItems).then(function(a){b(a.items,a.total,a.data)})},j.prototype.query=function(a,b,c){if(!a)throw"Parameter 'queryExpression' is null";b=b||i;var g=d.getUrl("query:"+a,this.databaseUri,c);return f.get(g).pipe(e.convertToItems).then(function(a){b(a.items,a.total,a.data)})},j.prototype.fetchChildren=function(a,b,c){if(!a)throw"Parameter 'id' is null";c=c||{},b=b||i,c.scope||(c.scope=["children"]);var g=d.getUrl(a,this.databaseUri,c);return f.get(g).pipe(e.convertToItems).then(function(a){b(a.items,a.total,a.data)})},b.exports=j},{"../helpers/ajaxHelper":62,"../helpers/itemHelper":64,"../helpers/itemWebApiUrlHelper":65,"./ItemUri":68,"./ItemVersionUri":69}],71:[function(a,b,c){var d=function(a){this.databaseName=a||"core",this.webApi="",this.virtualFolder="/sitecore/shell"};b.exports=d},{}],72:[function(a,b,c){var d=a("./fieldUri"),e=function(a,b,c,e,f){if(!a)throw"Parameter 'item' is null";if(!(b instanceof d))throw"Parameter 'fieldUri' is null";this.item=a,this.fieldUri=b,this.fieldName=c||"",this.value=e||"",this.type=f||"Single-Line Text"};b.exports=e},{"./fieldUri":73}],73:[function(a,b,c){var d=function(a,b){if(!a)throw"Parameter 'itemVersionUri' is null or empty";if(!b)throw"Parameter 'fieldId' is null or empty";this.itemVersionUri=a,this.fieldId=b};d.prototype.getDatabaseUri=function(){return this.itemVersionUri.getDatabaseUri()},d.prototype.getDatabaseName=function(){return this.itemVersionUri.getDatabaseName()},d.prototype.getItemUri=function(){return this.itemVersionUri.getItemUri()},d.prototype.getItemId=function(){return this.itemVersionUri.getItemId()},d.prototype.getLanguage=function(){return this.itemVersionUri.getLanguage()},d.prototype.getVersion=function(){return this.itemVersionUri.getVersion()},b.exports=d},{}],74:[function(a,b,c){var d=a("lodash/collection/map"),e=a("lodash/collection/find"),f=(a("lodash/collection/filter"),a("./fieldUri")),g=a("./databaseUri"),h=a("./ItemUri"),i=a("../helpers/ajaxHelper"),j=a("./field"),k=a("../helpers/itemWebApiUrlHelper"),l=function(a){this.$fields=a.$fields;var b=this;a.$fields.forEach(function(a,c){b[a.Name]=a.Value}),this.$itemUri=a.$itemUri,this.$itemId=a.$itemId,this.$itemName=a.$itemName,this.$displayName=a.$displayName,this.$language=a.$language,this.$version=a.$version,this.$templateName=a.$templateName,this.$templateId=a.$templateId,this.$hasChildren=a.$hasChildren,this.$path=a.$path,this.$url=a.$url,this.$mediaurl=a.$mediaurl},m=function(a,b){if(a=a||{},this.databaseUri=new g(a.Database),b||(b=a.itemUri?a.itemUri:new h(this.databaseUri,a.ID)),a instanceof m)return void l.call(this,a);this.$fields=[];var c=this,d=a.Fields||{};for(var e in d)if(d.hasOwnProperty(e)){var i=d[e];c[i.Name]=i.Value;var k=new f(b,e),n=new j(c,k,i.Name,i.Value,i.Type);i.FormattedValue&&(n.formattedValue=i.FormattedValue),i.LongDateValue&&(n.longDateValue=i.LongDateValue),i.ShortDateValue&&(n.shortDateValue=i.ShortDateValue),c.$fields.push(n)}this.$itemUri=b,this.$itemId=b.getItemId(),this.$itemName=a.Name||"",this.$displayName=a.DisplayName||"",this.$database=a.Database||"",this.$language=a.Language||"",this.$version=a.Version||0,this.$templateName=a.TemplateName||"",this.$templateId=a.TemplateId||"",this.$hasChildren=a.HasChildren||!1,this.$path=a.Path||"",this.$url=a.Url||"",this.$mediaurl=a.MediaUrl||"",this.$icon=a.Icon||""};m.prototype.getFieldById=function(a){return e(this.$fields,function(b){return b.fieldUri.getFieldId()===a},this)},m.prototype.save=function(a,b){var c=d(this.$fields,function(a){return{name:a.fieldName,value:this[a.fieldName]}},this),e=k.getUrl(this.$itemId,this.databaseUri),f={dataType:"json",type:"PUT",data:c};return $.when($.ajax(e,f)).pipe(i.convertResponse).then($.proxy(a,b))},m.prototype.rename=function(a,b,c){var d=[{name:"__itemName",value:a}],e=k.getUrl(this.$itemId,this.databaseUri),f={dataType:"json",type:"PUT",data:d};return $.when($.ajax(e,f)).pipe(i.convertResponse).then($.proxy(b,c))},m.prototype.remove=function(a,b){var c=k.getUrl(this.$itemId,this.databaseUri),d={dataType:"json",type:"DELETE"};return $.when($.ajax(c,d)).pipe(i.convertResponse).then($.proxy(a,b))},b.exports=m},{"../helpers/ajaxHelper":62,"../helpers/itemWebApiUrlHelper":65,"./ItemUri":68,"./databaseUri":71,"./field":72,"./fieldUri":73,"lodash/collection/filter":3,"lodash/collection/find":4,"lodash/collection/map":5}],75:[function(a,b,c){var d=a("../helpers/itemWebApiUrlHelper"),e=(a("../helpers/itemHelper"),a("../helpers/urlHelper")),f=a("../helpers/ajaxHelper"),g=a("../model/item"),h=(a("../model/field"),function(){}),i={create:function(a,b){var c=a;if(b=b||h,!a.Name||!a.TemplateId||!a.ParentId)throw"Provide valid parameter in order to create an Item";a.Database||(a.Database="core");var i=d.buildUrl(c.ParentId,{webApi:"/-/item/v1/sitecore/shell",database:a.Database});return i=e.addQueryParameters(i,{name:a.Name}),i=e.addQueryParameters(i,{template:a.TemplateId}),$.when($.ajax(i,f.options("POST",a.Fields))).pipe(f.convertResponse).pipe(function(a){return new g(a.items)}).then(b)}};b.exports=i},{"../helpers/ajaxHelper":62,"../helpers/itemHelper":64,"../helpers/itemWebApiUrlHelper":65,"../helpers/urlHelper":66,"../model/field":72,"../model/item":74}]},{},[67])(67)});