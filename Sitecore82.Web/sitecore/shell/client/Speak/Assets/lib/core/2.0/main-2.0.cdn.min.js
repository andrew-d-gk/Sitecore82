(function (global) {
  require.config({
    baseUrl: "/",
    paths: {
      Sitecore: "/sitecore/shell/client/Speak/Assets/lib/core/2.0/sitecore.min",
      Globalize: "/sitecore/shell/client/Speak/Assets/lib/core/2.0/globalize",
      HandlebarsLib: "//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.1/handlebars.min.js",
      scPipeline: "/sitecore/shell/client/Speak/Assets/lib/ui/2.0/scPipeline.min",
      scSpeakObservableArray: "/sitecore/shell/client/Speak/Assets/lib/ui/2.0/scSpeakObservableArray.min",
      scSpeakPresenter: "/sitecore/shell/client/Speak/Assets/lib/core/2.0/deps/scSpeakPresenter.min",
      scKoPresenter: "/sitecore/shell/client/Speak/Assets/lib/ui/2.0/scKoPresenter.min",
      knockout: "//ajax.aspnetcdn.com/ajax/knockout/knockout-3.0.0",
      underscore: "//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min",
      backbone: "//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.1/backbone-min",
      jquery: "//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min",
      bootstrap: "//ajax.aspnetcdn.com/ajax/bootstrap/3.2.0/bootstrap.min",
      //backward compatibility
      jqueryui: "//ajax.aspnetcdn.com/ajax/jquery.ui/1.10.1/jquery-ui.min",
    },
    shim: {
      "handlebars": { deps: ['HandlebarsLib'] },
      "Sitecore": { deps: ['handlebars', 'GlobalizeLib'] },
      "bootstrap": { deps: ['jquery'] },
      "knockout": { exports: "ko" },
      "jquery": { exports: "jQuery" },
      "underscore": { exports: "_" },
      "backbone": { deps: ["jquery", "underscore"], exports: "Backbone" },
      "scKoPresenter": { deps: ["sitecore", "knockout"] },
      "scPipeline": { deps: ["sitecore"] },
      "scSpeakPresenter": { deps: ["knockout", "backbone", "underscore", "jquery", "Sitecore"] },
      "jqueryui": { deps: ["jquery"] },
      "dynatree": { deps: ["jqueryui"/*, 'css!dynatreecss'*/] },
      "sitecore": { deps: ["Sitecore"] }
    },
    map: {
      "*": {
        "css": "/sitecore/shell/client/Speak/Assets/lib/core/2.0/deps/css.js"
      }
    }
  });

  define("GlobalizeLib", ['Globalize'], function (globalize) {
    window.Globalize = globalize;
    return globalize;
  });

  //backward compatibility
  define("sitecore", function () {
    window._sc = window.Sitecore.Speak;
    return window.Sitecore.Speak;
  } );

  define( "HandlebarsLib", function ( handlebars ) {
      window.Handlebars = handlebars;
      return handlebars;
  } );

  require( ["Sitecore", "jquery", "underscore"], function ( Sitecore ) {
    Sitecore.init();
  });
})(this);
