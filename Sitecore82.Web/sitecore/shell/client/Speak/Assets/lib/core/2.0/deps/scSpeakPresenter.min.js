!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=function(a,b){function c(a){if(8===a.nodeType)b(a);else if(a.childNodes.length>0)for(var d=0;d<a.childNodes.length;d++)c(a.childNodes[d],b)}return c(a,b)};b.exports={computeComments:d}},{}],2:[function(a,b,c){b.exports=function(b,c){return a("./ko")(b,c)}},{"./ko":3}],3:[function(a,b,c){var d=a("./dom");b.exports=function(a,b){var c=function(b){if(b.el){var c=[b.el],e=a.utils.array.toArray(b.el.querySelectorAll("[data-bind]"));c=c.concat(e),c.forEach(function(a){a.__registered=!0}),d.computeComments(b.el,function(a){a.__registered=!0}),b.el.__registered=!0}},e=function(){var a=new b.bindingProvider,c=a.nodeHasBindings;return a.nodeHasBindings=function(a){return a.__registered?!1:c.call(this,a)},a};return{markAsRegistered:c,SPEAKBindingProvider:e}}},{"./dom":1}],4:[function(a,b,c){var d=function(a,b,c,d,e){var f,g,h,i,j=jQuery(c),k=_.uniqueId("_71_");j.addClass(k),f=b.id,g=new a.model({type:k,name:f}),g.componentName=b.key,a.collection&&(h=new a.collection);var l=j.data("sc-behaviors");if(i=new a.view({el:"."+k,model:g,collection:h,app:d,behaviors:l}),e.markAsRegistered(i),b.el.__speak=!0,g.depricated=!0,i.beforeRender&&(g.beforeRender=function(){i.beforeRender.call(i,arguments)}),i.afterRender&&(g.afterRender=function(){i.afterRender.call(i,arguments)}),i.listen)for(var m in i.listen)if(i.listen.hasOwnProperty(m)){if(-1===m.indexOf(":$this"))return;var n=m.replace("$this",b.id);d.on(n,i[i.listen[m]],i)}return g};b.exports=d},{}],5:[function(a,b,c){b.exports=function(a,b){var c=a.Helpers,d={_current:0,converters:[],aborted:!1},e=function(){return d.converters.length},f=function(a){if(a=a||{},!(b.isFunction(a.canConvert)&&b.isFunction(a.convert)&&b.isFunction(a.reConvert)&&b.isString(a.name)))throw"invalid converter";d.converters.push(a)},g=function(a){d.converters=b.reject(d.converters,function(b){return b.name===a})},h=function(a){return b.find(d.converters,function(b){return b.name===a})},i=function(){return d.converters},j={name:"date",canConvert:function(a){return c.string.equals(a.type,this.name)||c.string.equals(a.type,"datetime")},convert:function(a){var b="",d=a.value;if(d)try{return c.date.parseISO(d).toLocaleDateString()}catch(e){return b}return b},reConvert:function(a){if(!a)return"";try{var b=new Date(a);return c.toISO(b)}catch(d){return a||""}},toStringWithFormat:function(a,b){if(c.date.isISO(a))try{var d=c.date.parseISO(a),e={mmss:{expression:"(\\W|^)mm(\\W+s{1,2}\\W|\\W+s{1,2}$)",value:c.date.ensureTwoDigits(d.getUTCMinutes())},mss:{expression:"(\\W|^)m(\\W+s{1,2}\\W|\\W+s{1,2}$)",value:d.getUTCMinutes().toString()},hmm:{expression:"(\\Wh{1,2}\\W+|^h{1,2}\\W+)mm(\\W|$)",value:c.date.ensureTwoDigits(d.getUTCMinutes())},hm:{expression:"(\\Wh{1,2}\\W+|^h{1,2}\\W+)m(\\W|$)",value:d.getUTCMinutes().toString()},ms:{expression:"(\\Wss\\W|^ss\\W)00(\\W|$)",value:c.date.ensureTwoDigits(d.getUTCMilliseconds())},ampm:{expression:"(\\W|^)AM/PM(\\W|$)",value:d.getUTCHours()>=12?"PM":"AM"},ap:{expression:"(\\W|^)A/P(\\W|$)",value:d.getUTCHours()>=12?"P":"A"},yyyy:{expression:"(\\W|^)yyyy(\\W|$)",value:d.getUTCFullYear().toString()},yy:{expression:"(\\W|^)yy(\\W|$)",value:c.date.ensureTwoDigits(d.getUTCFullYear()%100)},mm:{expression:"(\\W|^)mm(\\W|$)",value:c.date.ensureTwoDigits(d.getUTCMonth()+1)},m:{expression:"(\\W|^)m(\\W|$)",value:(d.getUTCMonth()+1).toString()},dd:{expression:"(\\W|^)dd(\\W|$)",value:c.date.ensureTwoDigits(d.getUTCDate())},d:{expression:"(\\W|^)d(\\W|$)",value:d.getUTCDate().toString()},hh:{expression:"(\\W|^)hh(\\W|$)",value:c.date.ensureTwoDigits(d.getUTCHours())},h:{expression:"(\\W|^)h(\\W|$)",value:d.getUTCHours()>12?(d.getUTCHours()-12).toString():(0===d.getUTCHours()?12:d.getUTCHours()).toString()},ss:{expression:"(\\W|^)ss(\\W|$)",value:c.date.ensureTwoDigits(d.getUTCSeconds())},s:{expression:"(\\W|^)s(\\W|$)",value:d.getUTCSeconds().toString()}};for(var f in e){var g=e[f]?e[f].expression:"",h="$1"+e[f].value+"$2";if(""!==g){var i=new RegExp(g,"g");b=b.replace(i,h)}}return b}catch(j){return a}return a}},k={name:"Icon",baseUrl:c.url.combine(a.SiteInfo.virtualFolder,"~/icon/"),canConvert:function(a,b,d){return c.string.equals(a.type,this.name)},convert:function(a){if(this.canConvert(a)){var b=a.value||"/sitecore/images/blank.gif";return 0!==b.indexOf("/sitecore/")&&(b=c.url.combine(this.baseUrl,b)),c.string.format('<img src="{0}" alt="" />',b)}},reConvert:function(a){}},l={length:e,add:f,remove:g,get:h,getAll:i};l.add(j),l.add(k),b.extend(a,{Converters:l})}},{}],6:[function(a,b,c){b.exports=function(a,b){a.Database=function(a){if(!a)throw"Parameter 'databaseUri' is null";this.databaseUri=a,this.ajaxOptions={dataType:"json"}},b.extend(a.Database.prototype,{convertToItem:function(a){return a.result?a.result.items?0===a.result.items.length?null:a.result.items.length>1?(console.debug("ERROR: Expected a single item"),null):new _sc.Definitions.Data.Item(a.result.items[0]):(console.debug("ERROR: No items from server"),null):(console.debug("ERROR: No data from server"),null)},convertToItems:function(a){if(!a.result)return console.debug("ERROR: No data from server"),{items:[],totalCount:0,data:a};if(!a.result.items)return console.debug("ERROR: No items from server"),{items:[],totalCount:0,data:a};var c=b.map(a.result.items,function(a){return new _sc.Definitions.Data.Item(a)});return{items:c,total:a.result.totalCount,data:a.result}},getItem:function(a,b,c){if(!a)throw"Parameter 'id' is null";if(!b)throw"Parameter 'completed' is null";c=c||{},a instanceof _sc.Definitions.Data.ItemUri&&(c.database=a.getDatabaseName(),a=a.getItemId()),a instanceof _sc.Definitions.Data.ItemVersionUri&&(c.database=a.getDatabaseName(),c.language=a.getLanguage(),c.version=a.getVersion(),a=a.getItemId());var d=this.getUrl(a,c);this.get(d).pipe(this.convertToItem).done(b).fail(function(a){b(null,a)})},search:function(a,b,c){if(!b)throw"Parameter 'completed' is null";var d=this.getUrl("search:"+a,c);this.get(d).pipe(this.convertToItems).done(function(a){b(a.items,a.total,a.data)}).fail(function(a){b([],0,a)})},query:function(a,b,c){if(!a)throw"Parameter 'queryExpression' is null";if(!b)throw"Parameter 'completed' is null";var d=this.getUrl("query:"+a,c);this.get(d).pipe(this.convertToItems).done(function(a){b(a.items,a.total,a.data)}).fail(function(a){b([],0,a)})},getChildren:function(a,b,c){if(!a)throw"Parameter 'id' is null";if(!b)throw"Parameter 'completed' is null";c=c||{},c.scope||(c.scope=["children"]);var d=this.getUrl(a,c);this.get(d).pipe(this.convertToItems).done(function(a){b(a.items,a.total,a.data)}).fail(function(a){b([],0,a)})},getUrl:function(a,b){b=b||{},b.database||(b.database=this.databaseUri.getDatabaseName()),b.webApi||(b.webApi=this.databaseUri.webApi),b.virtualFolder||(b.virtualFolder=this.databaseUri.virtualFolder);var c=Sitecore.Speak.Web.itemWebApi.getUrl(a,b);return c},get:function(a){return jQuery.ajax({url:a,dataType:this.ajaxOptions.dataType})}})}},{}],7:[function(a,b,c){b.exports=function(a,b,c){a.Field=function(b,c,d,e,f){if(!b)throw"Parameter 'item' is null";if(!(c instanceof a.FieldUri))throw"Parameter 'fieldUri' is null";this.item=b,this.fieldUri=c,this.fieldName=d||"",this.value=e||"",this.type=f||"Single-Line Text"},c.extend(a.Field.prototype,{toModel:function(){return this.$model||(this.$model=new b.Definitions.Models.Model(this)),this.$model},toViewModel:function(){var a={fieldId:this.fieldUri.getFieldId(),fieldName:this.fieldName,type:this.type,value:new ko.observable(this.value)},b=this;return a.value.subscribe(function(a){b.item[b.fieldName]=a,b.value=a}),a}})}},{}],8:[function(a,b,c){b.exports=function(a,b){b.extend(a.Web,{itemWebApi:{takeValidScope:function(a){switch(a){case"self":return"s";case"children":return"c";case"parent":return"p";default:throw"Unsupported scope. It must be either 'self', 'children' or 'parent'"}},addScope:function(c,d){if(d&&b.isArray(d)){var e=b.compact(b.map(d,a.Web.itemWebApi.takeValidScope)).join("|");c=a.Helpers.url.addQueryParameters(c,{scope:e})}return c},addDatabase:function(c,d){return d&&b.isString(d)&&(c=a.Helpers.url.addQueryParameters(c,{sc_database:d})),c},addContentDatabase:function(c,d){return d&&b.isString(d)&&(c=a.Helpers.url.addQueryParameters(c,{sc_content:d})),c},addItemSelectorUrlPortion:function(c,d,e){return d&&b.isString(d)&&(e&&e.facetsRootItemId&&(c=a.Helpers.url.addQueryParameters(c,{facetsRootItemId:e.facetsRootItemId})),0===d.indexOf("search:")?(c=a.Helpers.url.addQueryParameters(c,{search:d.substr("search:".length)}),e&&e.root&&Sitecore.Speak.Helpers.id.isId(e.root)&&(c=a.Helpers.url.addQueryParameters(c,{root:e.root})),e&&e.searchConfig&&(c=a.Helpers.url.addQueryParameters(c,{searchConfig:e.searchConfig}))):c=0===d.indexOf("query:")?a.Helpers.url.addQueryParameters(c,{query:d.substr("query:".length)}):a.Helpers.id.isId(d)?a.Helpers.url.addQueryParameters(c,{sc_itemid:d}):a.Helpers.url.combine(c,d)),c},addLanguage:function(b,c){return c&&(b=a.Helpers.url.addQueryParameters(b,{language:c})),b},addItemVersion:function(b,c){return c&&(b=a.Helpers.url.addQueryParameters(b,{sc_itemversion:c})),b},getUrl:function(b,c){c=c||{};var d="/-/item/v1",e="";c.webApi&&(d=c.webApi),c.virtualFolder&&(e=c.virtualFolder);var f=a.Helpers.url.combine(d,e);return f=this.addItemSelectorUrlPortion(f,b,c),c.scope&&(f=this.addScope(f,c.scope)),c.database&&""!==b&&0===b.indexOf("search:")?f=this.addContentDatabase(f,c.database):c.database&&(f=this.addDatabase(f,c.database)),c.language&&(f=this.addLanguage(f,c.language)),c.version&&(f=this.addItemVersion(f,c.version)),c.payLoad&&(f=a.Helpers.url.addQueryParameters(f,{payload:"full"})),c.formatting&&(f=a.Helpers.url.addQueryParameters(f,{format:c.formatting})),c.sorting&&(f=a.Helpers.url.addQueryParameters(f,{sorting:c.sorting})),c.fields&&(f=a.Helpers.url.addQueryParameters(f,{fields:c.fields.join("|")})),c.pageSize&&c.pageSize>0&&(f=a.Helpers.url.addQueryParameters(f,{pageIndex:c.pageIndex,pageSize:c.pageSize})),f}}})}},{}],9:[function(a,b,c){b.exports=function(a,b,c){var d={options:function(a,b){return{dataType:"json",type:a,data:b}},convertResponse:function(a){return 200!==a.statusCode?jQuery.Deferred().reject({readyState:4,status:a.statusCode,responseText:a.error.message}):a.result},createItem:function(a){return new b.Definitions.Data.Item(a.items[0])},triggerCreated:function(a){return b.trigger("item:created",a),a}},e=function(a,c,e){var f=a,g=Sitecore.Speak.utils.security.antiForgery.getAntiForgeryToken();if(c=c||{},!a.name||!a.templateId||!a.parentId)throw"Provide valid parameter in order to create an Item";a.database||(a.database="core");var h=b.Web.itemWebApi.getUrl(f.parentId,{webApi:"/-/item/v1/sitecore/shell",database:a.database});return h=b.Helpers.url.addQueryParameters(h,{name:a.name}),h=b.Helpers.url.addQueryParameters(h,{template:a.templateId}),c[g.formKey]=g.value,jQuery.when(jQuery.ajax(h,d.options("POST",c))).pipe(d.convertResponse).pipe(d.createItem).pipe(d.triggerCreated).done(e)},f=function(a,d){var e;this.$fields?e=c.map(this.$fields,function(a){return{name:a.fieldName,value:this[a.fieldName]}},this):(e=c.map(this.attributes.$fields,function(a){var b;return this.attributes[a.fieldName]!==a.value?b={name:a.fieldName,value:this.attributes[a.fieldName]}:void 0},this),e=c.filter(e,function(a){return"undefined"!=typeof a}));var f=this.getUrl(),g={dataType:"json",type:"PUT",data:e},h=function(a){return b.trigger("item:updated",this),a};return jQuery.when(jQuery.ajax(f,g)).pipe(this.convertResponse).pipe(h).done(jQuery.proxy(a,d))},g=function(a,d){var e=this.getUrl(),f={dataType:"json",type:"GET"},g=function(a){if(!a.items)return this;if(0===a.items.length)throw"Item not found";if(date.items.length>1)throw"Expected a single item";var d=a.items[0];return c.each(d.Fields,function(a,c){this[a.Name]=a.Value;var d=this.getFieldById(c);null!=d?d.value=a.Value:this.$fields.push(this,new b.Definitions.Data.Field(fieldUri,a.Name,a.Value,a.Type))},this),this};return jQuery.when(jQuery.ajax(e,f)).pipe(this.convertResponse).pipe(g).done(jQuery.proxy(a,d))},h=function(a,c){var d=this.getUrl(),e={dataType:"json",type:"DELETE"},f=function(a){return b.trigger("item:deleted",this),a};return jQuery.when(jQuery.ajax(d,e)).pipe(this.convertResponse).pipe(f).done(jQuery.proxy(a,c))},i=function(a,c,d){var e=[{name:"__itemName",value:a}],f=this.getUrl(),g={dataType:"json",type:"PUT",data:e},h=function(a){return b.trigger("item:renamed",this),a};return jQuery.when(jQuery.ajax(f,g)).pipe(this.convertResponse).pipe(h).done(jQuery.proxy(c,d))};a.createItem=e;var j=function(a,b,c){var d=this;c=c||{};var e=c.success||function(){b&&b(d)};switch(a){case"read":this.read(this).pipe(e);break;case"create":throw"The 'create' operation is not supported";case"update":this.update(this,c).pipe(e);break;case"delete":this.remove(this).pipe(e)}},k=b.Definitions.Models.Model.extend({idAttribute:"itemId",getUrl:function(){var b=this.get("itemUri"),c=new a.Database(b.getDatabaseUri());return c.getUrl(b.getItemId())},read:g,remove:h,rename:i,update:f});a.Item=function(b,d){if(!d)if(d=b,d.itemUri)b=d.itemUri;else{var e=new a.DatabaseUri(d.Database);b=new a.ItemUri(e,d.ID)}return d instanceof a.Item?void this.shallowCopy(d):(this.$fields=[],c.each(d.Fields,function(c,d){this[c.Name]=c.Value;var e=new a.FieldUri(b,d),f=new a.Field(this,e,c.Name,c.Value,c.Type);c.FormattedValue&&(f.formattedValue=c.FormattedValue),c.LongDateValue&&(f.longDateValue=c.LongDateValue),c.ShortDateValue&&(f.shortDateValue=c.ShortDateValue),this.$fields.push(f)},this),this.itemUri=b,this.itemId=b.getItemId(),this.itemName=d.Name||"",this.$displayName=d.DisplayName||"",this.$database=d.Database||"",this.$language=d.Language||"",this.$version=d.Version||0,this.$templateName=d.TemplateName||"",this.$templateId=d.TemplateId||"",this.$hasChildren=d.HasChildren||!1,this.$path=d.Path||"",this.$url=d.Url||"",this.$mediaurl=d.MediaUrl||"",void(this.$icon=d.Icon||""))},c.extend(a.Item.prototype,{getFieldById:function(a){return c.find(this.$fields,function(b){return b.fieldUri.getFieldId()==a},this)},shallowCopy:function(a){this.$fields=a.$fields,c.each(a.$fields,function(a,b){this[a.Name]=a.Value},this),this.itemUri=a.itemUri,this.itemId=a.itemId,this.itemName=a.itemName,this.$displayName=a.$displayName,this.$language=a.$language,this.$version=a.$version,this.$templateName=a.$templateName,this.$templateId=a.$templateId,this.$hasChildren=a.$hasChildren,this.$path=a.$path,this.$url=a.$url,this.$mediaurl=a.$mediaurl},toModel:function(){if(!this.$model){var a=new k(this);return a.sync=j,a}return this.$model},toViewModel:function(){return this.toModel().viewModel},convertResponse:d.convertResponse})}},{}],10:[function(a,b,c){!function(a){"use strict";var b,c=a.Backbone,d=a._,e=(a.$,Sitecore.Speak,c.View.prototype._configure),f=(c.View.prototype.render,Array.prototype.push),g=Array.prototype.concat,h=Array.prototype.splice,i=Sitecore.Speak.Definitions.Views.View.extend({constructor:function(a){a=a||{},i.setupView(this,a),c.View.call(this,a)},nestedlayout:!0,insertView:function(a,b){return b?this.setView(a,b,!0):this.setView(a,!0)},insertViews:function(a){return d.isArray(a)?this.setViews({"":a}):(d.each(a,function(b,c){a[c]=d.isArray(b)?b:[b]}),this.setViews(a))},getView:function(a){return this.getViews(a).first().value()},getViews:function(a){var b=d.chain(this.views).map(function(a){return d.isArray(a)?a:[a]},this).flatten().value();return"string"==typeof a?d.chain([this.views[a]]).flatten():d.chain("function"==typeof a?d.filter(b,a):b)},setView:function(a,b,c){var e,f,h,i=this;if("string"!=typeof a&&(c=b,b=a,a=""),this.views=this.views||{},e=b.__manager__,f=this.views[a],!e)throw new Error("Please set `View#manage` property with selector '"+a+"' to `true`.");return h=b._options(),e.parent=i,e.selector=a,c?(this.views[a]=g.call([],f||[],b),e.append=!0,b):(e.hasRendered&&h.partial(i.el,e.selector,b.el,e.append),f&&d.each(g.call([],f),function(a){a.remove()}),this.views[a]=b)},setViews:function(a){return d.each(a,function(a,b){return d.isArray(a)?d.each(a,function(a){this.insertView(b,a)},this):void this.setView(b,a)},this),this},render:function(){function a(){function a(){var a=e.afterRender;a&&a.call(c,c),c.trigger("afterRender",c)}var b,d;return h&&(e.contains(h.el,c.el)||e.partial(h.el,g.selector,c.el,g.append)),c.delegateEvents(),g.hasRendered=!0,k.resolveWith(c,[c]),(b=g.queue.shift())?b():delete g.queue,j&&j.queue?(d=function(){h.off("afterRender",d,this),a()},h.on("afterRender",d,c)):void a()}function b(){var b=c._options(),e=c.__manager__,f=e.parent;f&&f.__manager__;c._render(i._viewRender,b).done(function(){if(!d.keys(c.views).length)return a();var e=d.map(c.views,function(a){var c=d.isArray(a);return c&&a.length?a[0].render().pipe(function(){return b.when(d.map(a.slice(1),function(a){return a.render()}))}):c?a:a.render()});b.when(e).done(function(){a()})})}var c=this,e=c._options(),g=c.__manager__,h=g.parent,j=h&&h.__manager__,k=e.deferred();return g.queue?f.call(g.queue,function(){b()}):(g.queue=[],b(c,k)),k.view=c,k},remove:function(){return i._removeView(this,!0),this._remove.apply(this,arguments)},_options:function(){return i.augment({},this,i.prototype.options,this.options)}},{_cache:{},_makeAsync:function(a,b){var c=a.deferred();return c.async=function(){return c._isAsync=!0,b},c},_viewRender:function(a,b){function c(c){c&&b.html(a.$el,c),h.resolveWith(a,[a])}function e(a,d){var e,g=i._makeAsync(b,function(a){c(a)});i.cache(f,d),d&&(e=b.render.call(g,d,a)),g._isAsync||c(e)}var f,g,h;a.__manager__;return{render:function(){var c=a.serialize||b.serialize,j=a.data||b.data,k=c||j,l=a.template||b.template,m="";return a.parent&&a.parent.$el&&(m=a.parent.$el.data("sc-id")),d.isFunction(k)&&(k=k.call(a)),h=i._makeAsync(b,function(a){e(k,a)}),"string"==typeof l&&(f=b.prefix+l),(g=i.cache(f+m))?(e(k,g,f),h):("string"==typeof l?g=b.fetch.call(h,b.prefix+l,m):null!=l&&(g=b.fetch.call(h,l)),h._isAsync||e(k,g),h)}}},_removeViews:function(a,b){"boolean"==typeof a&&(b=a,a=this),a=a||this,a.getViews().each(function(a){(a.__manager__.hasRendered||b)&&i._removeView(a,b)})},_removeView:function(a,b){var c,e=a.__manager__,f="boolean"==typeof a.keep?a.keep:a.options.keep;if(!f&&(e.append===!0||b)){if(i.cleanViews(a),a._removeViews(!0),a.$el.remove(),!e.parent)return;if(c=e.parent.views[e.selector],d.isArray(c))return d.each(d.clone(c),function(a,b){a&&a.__manager__===e&&h.call(c,b,1)});delete e.parent.views[e.selector]}},cleanViews:function(a){d.each(g.call([],a),function(a){a.unbind(),a.model instanceof c.Model&&a.model.off(null,null,a),a.collection instanceof c.Collection&&a.collection.off(null,null,a),a.cleanup&&a.cleanup.call(a)})},cache:function(a,b){return a in this._cache?this._cache[a]:null!=a&&null!=b?this._cache[a]=b:void 0},configure:function(a){this.augment(i.prototype.options,a),a.manage&&(c.View.prototype.manage=!0)},augment:d.forIn?function(a){return d.reduce(Array.prototype.slice.call(arguments,1),function(a,b){return d.forIn(b,function(b,c){a[c]=b}),a},a)}:d.extend,setupView:function(a,e){if(!a.__manager__){var f,h,j,k=c.LayoutManager.prototype,l=d.pick(a,b);d.defaults(a,{views:{},__manager__:{},_removeViews:i._removeViews,_removeView:i._removeView},i.prototype),e=a.options=d.defaults(e||{},a.options,k.options),j=d.pick(e,g.call(["events"],d.values(e.events||{}))),i.augment(a,j),(l.render===i.prototype.render||l.render===c.View.prototype.render)&&delete l.render,i.augment(e,l),a._remove=c.View.prototype.remove,a._render=function(a,b){var c=this,d=c.__manager__,e=b.beforeRender;return d.hasRendered&&this._removeViews(),e&&e.call(this,this),this.trigger("beforeRender",this),a(this,b).render()},a.render=i.prototype.render,a.remove!==k.remove&&(a._remove=a.remove,a.remove=k.remove),f=e.views||a.views,d.keys(f).length&&(h=f,a.views={},a.setViews(h)),a.options.template?a.options.template=e.template:a.template&&(e.template=a.template,delete a.template)}}});Sitecore.Speak.Definitions.Views.CompositeView=c.Layout=c.LayoutView=c.LayoutManager=i,i.VERSION="0.7.5",c.View.prototype._configure=function(){var a=e.apply(this,arguments);return this.manage&&i.setupView(this),a},i.prototype.options={prefix:"",deferred:function(){return jQuery.Deferred()},fetch:function(a){return d.template(jQuery(a).html())},partial:function(a,b,c,d){var e=b?jQuery(a).find(b):jQuery(a);this[d?"append":"html"](e,c)},html:function(a,b){a.html(b)},append:function(a,b){a.append(b)},when:function(a){return jQuery.when.apply(null,a)},render:function(a,b){return a(b)},contains:function(a,b){return jQuery.contains(a,b)}},b=d.keys(i.prototype.options),i.prototype.options=d.extend(i.prototype.options,{fetch:function(a,b,c){var e="[data-layout-"+a+"]";b&&(e="[data-layout-"+a+"='"+b+"']");var f=jQuery(e).html();if(void 0===f)throw"missing template data-layout-"+a+" in order to work";return d.template(f)}})}(window)},{}],11:[function(a,b,c){b.exports=function(a,b,c){a.LocalStorage=function(a){if(!a)throw"you need to provide a unique key";this.appID=a,this.fullKey=this.prefix+this.appID,this.localStorageLibrary=jQuery.jStorage},c.extend(a.LocalStorage.prototype,{prefix:"#sc#",get:function(a){var b=this.fullKey+a;return this.localStorageLibrary.get(b)},getAll:function(){var a,b=this.localStorageLibrary.index(),d={};return a=c.filter(b,function(a){return a.indexOf(this.fullKey)>=0},this),c.each(a,function(a){var b=a.substring(this.fullKey.length,a.length);d[b]=this.localStorageLibrary.get(a)},this),d},deleteRecord:function(a){var b=this.fullKey+a;return this.localStorageLibrary.deleteKey(b)},set:function(a,b,c){var d=this.fullKey+a;return this.localStorageLibrary.set(d,b,c)},flush:function(){var a=this.localStorageLibrary.index(),b=c.filter(a,function(a){return a.indexOf(this.fullKey)>=0},this);c.each(b,function(a){this.localStorageLibrary.deleteKey(a)},this)}})}},{}],12:[function(a,b,c){b.exports=function(a,b){var c=a.Pipelines=function(){var c=[];return{add:function(a){if(!a||!a.name||!b.isObject(a))throw new Error("invalid pipeline");c.push(a),this[a.name]=a},remove:function(d){c=b.reject(c,function(a){return a.name===d}),delete a.Pipelines[d]},length:function(){return c.length}}}();c.Pipeline=function(a){var c={name:a,processors:[],add:function(a){if(!(a&&a.priority&&a.execute&&b.isNumber(a.priority)&&b.isFunction(a.execute)))throw"not valid step";this.processors.push(a)},length:function(){return this.processors.length},remove:function(a){this.processors=b.reject(this.processors,function(b){return b===a})},execute:function(a){var c=b.sortBy(this.processors,function(a){return a.priority});b.each(c,function(b){return a.aborted?!1:void b.execute(a)})}};return c};var d=function(a,b){var c=a.split("."),d=c[0];if("this"===d)new Function(a).call(b.control.model);else if(b.app&&"app"===d){var e=a.replace("app","this");new Function(e).call(b.app)}else new Function(a)()},e={priority:1e3,execute:function(a){"javascript"===a.handler&&(a.target.indexOf(";")>0?b.each(a.target.split(";"),function(b){d(b,a)}):d(a.target,a))}},f={priority:2e3,execute:function(b){"command"===b.handler&&a.Commands.executeCommand(b.target)}},g={priority:3e3,execute:function(b){if("serverclick"===b.handler){var c={url:b.target,type:"POST",dataType:"json"},d=function(c){a.Pipelines.ServerInvoke.execute({data:c,model:b.model})};jQuery.ajax(c).done(d)}}},h={priority:4e3,execute:function(a){if("trigger"===a.handler){var b=a.app;if(!b)throw"An application is a required when triggering events";var c=a.target,d={},e=c.indexOf("(");if(e>=0){if(-1==c.indexOf(")",c.length-1))throw"Missing ')'";var f=c.substr(e+1,c.length-e-2);d=jQuery.parseJSON(f),c=c.substr(0,e)}d.sender=a.control,b.trigger(c,d)}}},i={priority:1e3,execute:function(a){var b=a.data.ViewModel;null!=b&&ko.mapping.fromJS(b,{},a.model)}},j=new a.Pipelines.Pipeline("Invoke");j.add(e),j.add(f),j.add(g),j.add(h),a.Pipelines.add(j);var k=new a.Pipelines.Pipeline("ServerInvoke");k.add(i),a.Pipelines.add(k)}},{}],13:[function(a,b,c){b.exports=function(a,b){var c={combine:function(){if(0===arguments.length)return"";var a=b.reduce(arguments,function(a,c){return c&&b.isString(c)?a+"/"+b.compact(c.split("/")).join("/"):a});return a?0===a.indexOf("/")?a:"/"+a:""},isParameterNameAlreadyInUrl:function(a,b){return a.indexOf("?"+b+"=")>=0||a.indexOf("&"+b+"=")>=0},addQueryParameters:function(a,d){var e,f=b.pairs(d),g="([\\?&])({{param}}=[^&]+)",h=a;return b.each(f,function(a){c.isParameterNameAlreadyInUrl(h,a[0])?(e=new RegExp(g.replace("{{param}}",encodeURIComponent(a[0])),"i"),h=h.replace(e,"$1"+a[0]+"="+a[1])):(h=h+=~h.indexOf("?")?"&":"?",h+=encodeURIComponent(a[0])+"="+encodeURIComponent(a[1]))}),h},getQueryParameters:function(a){var c,d={};return b.isString(a)?(c=a.split("?"),(c=c.length>1?c[1].split("&"):c[0].split("&"))?(b.each(c,function(a){var b=a.split("=");2===b.length&&(d[b[0]]=decodeURIComponent(b[1].replace(/\+/g," ")))}),d):void 0):d}},d={parseISO:function(a){var c,d,e,f,g,h;return b.isString(a)?(c=parseInt(a.substr(0,4),10),d=parseInt(a.substr(4,2),10)-1,e=parseInt(a.substr(6,2),10),8!==a.indexOf("T")?new Date(Date.UTC(c,d,e,0,0,0,0)):(f=parseInt(a.substr(9,2),10),g=parseInt(a.substr(11,2),10),h=parseInt(a.substr(13,2),10),new Date(Date.UTC(c,d,e,f,g,h)))):null},toISO:function(a){var c;return b.isDate(a)?(c="",c+=a.getUTCFullYear(),c+=this.ensureTwoDigits(a.getUTCMonth()+1),c+=this.ensureTwoDigits(a.getUTCDate()),c+="T",c+=this.ensureTwoDigits(a.getUTCHours()),c+=this.ensureTwoDigits(a.getUTCMinutes()),c+=this.ensureTwoDigits(a.getUTCSeconds())):c},isISO:function(a){var c;return!b.isString(a)||8!==a.length&&15!==a.length?!1:(c=this.parseISO(a),"[object Date]"===Object.prototype.toString.call(c)?isNaN(c.getYear())?!1:!0:!1)},ensureTwoDigits:function(a){return 10>a?"0"+a.toString():a.toString()}},e={isId:function(a){return b.isString(a)?/^\{?[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\}?$/i.test(a):!1},toId:function(a){return a&&32===a.length?"{"+a.substr(0,8)+"-"+a.substr(8,4)+"-"+a.substr(12,4)+"-"+a.substr(16,4)+"-"+a.substr(20,12)+"}":a},toShortId:function(a){return b.isString(a)&&e.isId(a)?a.replace(/-|\{|\}/g,""):void 0}},f={endsWith:function(a,b){return b&&a?a.lastIndexOf(b)===a.length-b.length:!1},equals:function(a,c,d){return b.isString(a)&&b.isString(c)?d?b.isBoolean(d)?a===c:void 0:a.toLowerCase()===c.toLowerCase():void 0},format:function(a){return a?(b.each(arguments,function(b,c){a=a.replace(new RegExp("\\{"+(c-1)+"\\}","gi"),b)}),a):a},formatByTemplate:function(a,c){if("function"!=typeof c)return a;if("string"!=typeof a)return"";var d=/{{(.*?)}}/gi,e=a.match(d);return b.each(e,function(b){var d=b.replace("{{","").replace("}}",""),e=c(d);"undefined"!=typeof e&&null!=e&&(a=a.replace(b,e))}),a}},g={getOwnProperties:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c}},h={execute:function(c,d){if(c){var e=c.indexOf(":");if(0>=e)throw"Invocation is malformed (missing 'handler:')";d=d||{};var f=c.substr(0,e),g=c.substr(e+1),h=b.extend({},{handler:f,target:g},d);a.Pipelines.Invoke.execute(h)}}},i={loadOverlays:function(b){var c=jQuery("script[type='text/x-sitecore-overlays']");if(0!==c.length){var d=c.data("sc-overlays").split("|"),e=c.data("sc-parameters");for(var f in d){var g=d[f]+"?speak="+a.VERSION+"&"+e;jQuery.ajax({url:g,dataType:"json"}).done(function(c){a.Helpers.overlay.processOverlays(b,c,d[f])}).fail(function(a){console.log("Overlay url failed: "+g,a)})}}},processOverlays:function(a,b,c){var d=b.overlays;for(var e in d)this.processOverlay(a,d[e],c)},processOverlay:function(a,c,d){var e,f=c.command,g=c.selector,h=c.placement,i=c.html;if("component:"===g.substr(0,10)){var j=g.substr(10),k=b.find(a.Controls,function(a){return a.name==j});if(null===k)return void console.log("Overlay selector not found: "+g);e=k.view.$el}else e=jQuery(g);if(null===e||0===e.length)return void console.log("Overlay selector not found: "+g);switch(f){case"insert":this.insert(a,e,h,i,d);break;case"remove":this.remove(a,e);break;case"replace":this.replace(a,e,i,d);break;default:console.log("Unknow overlay command: "+f)}},insert:function(c,d,e,f,g){f="<div data-sc-app id='"+b.uniqueId("overlay-")+"' >"+f,f+="</div>";var h=jQuery(jQuery.parseHTML(f));switch(e){case"before":h.insertBefore(d);break;case"after":h.insertAfter(d);break;case"prepend":d.prepend(f);break;case"append":d.append(f);break;default:console.log("Unknow overlay insert placement: "+e)}a.load(window,h,function(b){a.trigger("overlay-loaded",{app:b,url:g})})},remove:function(a,b){b.remove()},replace:function(b,c,d,e){d=jQuery.parseHTML(d),$html=jQuery(d),c.replaceWith($html),a.load(window,$html,function(b){a.trigger("overlay-loaded",{app:b,url:e})})}},j={init:function(){jQuery(window).resize(function(){a.trigger("window:resize",jQuery(window).width(),jQuery(window).height())})},loaded:function(){a.trigger("window:loaded")}};b.extend(a,{Helpers:{url:c,date:d,id:e,string:f,object:g,invocation:h,overlay:i,window:j}}),a.Helpers.window.init()}},{}],14:[function(a,b,c){b.exports=function(a,b,c){a.DatabaseUri=function(a){if(!a)throw"Parameter 'databaseName' is null or empty";this.databaseName=a,this.webApi="",this.virtualFolder="/sitecore/shell"},c.extend(a.DatabaseUri.prototype,{getDatabaseName:function(){return this.databaseName}}),a.ItemUri=function(a,b){if(!a)throw"Parameter 'databaseUri' is null or empty";if(!b)throw"Parameter 'itemId' is null or empty";this.databaseUri=a,this.itemId=b},c.extend(a.ItemUri.prototype,{getDatabaseName:function(){return this.databaseUri.databaseName},getDatabaseUri:function(){return this.databaseUri},getItemId:function(){return this.itemId}}),a.ItemVersionUri=function(a,b,d){if(!a)throw"Parameter 'itemUri' is null";if(!b)throw"Parameter 'language' is null or empty";if(!c.isNumber(d))throw"Parameter 'version' is null or not a number";this.itemUri=a,this.language=b,this.version=d},c.extend(a.ItemVersionUri.prototype,{getDatabaseUri:function(){return this.itemUri.getDatabaseUri()},getDatabaseName:function(){return this.itemUri.getDatabaseName()},getItemUri:function(){return this.itemUri},getItemId:function(){return this.itemUri.getItemId()},getLanguage:function(){return this.language},getVersion:function(){return this.version}}),a.FieldUri=function(a,b){if(!a)throw"Parameter 'itemVersionUri' is null or empty";if(!b)throw"Parameter 'fieldId' is null or empty";this.itemVersionUri=a,this.fieldId=b},c.extend(a.FieldUri.prototype,{getDatabaseUri:function(){return this.itemVersionUri.getDatabaseUri()},getDatabaseName:function(){return this.itemVersionUri.getDatabaseName()},getItemUri:function(){return this.itemVersionUri.getItemUri()},getItemId:function(){return this.itemVersionUri.getItemId()},getLanguage:function(){return this.itemVersionUri.getLanguage()},getVersion:function(){return this.itemVersionUri.getVersion()},getFieldId:function(){return this.fieldId}})}},{}],15:[function(a,b,c){b.exports=function(b,c){var d=a("../model/baseModel")(c),e=a("../view/baseView")(c),f=a("../model/models")(d),g=a("../view/views")(e),h=function(){b.createComponent("ComponentBase",f.ComponentModel,g.ComponentView,".sc-componentbase"),b.createComponent("ControlBase",f.ControlModel,g.ControlView,".sc-controlbase"),b.createComponent("BlockBase",f.BlockModel,g.BlockView,".sc-blockbase"),b.createComponent("ButtonBase",f.ButtonBaseModel,g.ButtonBaseView,".sc-buttonBase"),b.createComponent("InputBase",f.InputModel,g.InputView,".sc-inputbase"),b.createComponent("PageBase",d,e,"body")};return{setup:h,Component:{Model:f.ComponentModel,View:g.ComponentView},Control:{Model:f.ControlModel,View:g.ControlView},Block:{Model:f.BlockModel,View:g.BlockView},Button:{
Model:f.ButtonBaseModel,View:g.ButtonBaseView},Input:{Model:f.InputModel,View:g.InputView},baseComponent:{Model:d,View:e}}}},{"../model/baseModel":21,"../model/models":22,"../view/baseView":24,"../view/views":25}],16:[function(a,b,c){var d=function(a,b){if(Sitecore.Speak.Behaviors=Sitecore.Speak.Behaviors||{},Sitecore.Speak.Behaviors[a])throw new Error("There is already a behavior with the same name");return Sitecore.Speak.Behaviors[a]=b,Sitecore.Speak.Behaviors[a]};b.exports={createBehavior:d}},{}],17:[function(a,b,c){var d=function(a){if(!a.name||!a.convert)throw"invalid binding converter";if(Sitecore.Speak.BindingConverters&&Sitecore.Speak.BindingConverters[a.name])throw"already a converter with the same name";Sitecore.Speak.BindingConverters=Sitecore.Speak.BindingConverters||{},Sitecore.Speak.BindingConverters[a.name]=a.convert};b.exports={createBindingConverter:d}},{}],18:[function(a,b,c){b.exports=function(b){var c=a("../model/baseModel")(b),d=a("../view/baseView")(b),e=function(){var a=this._scAttrs;_.each(a,function(a){if(a.value&&-1!==a.value.indexOf("$el.")){var b=a.value.substring("$el.".length);if(-1!==b.indexOf(":")){var c=b.split(":");if(2===c.length){var d=this.$el[c[0]](c[1]);"undefined"!=typeof d?this.model.set(a.name,d):a.defaultValue&&this.model.set(a.name,a.defaultValue)}}else this.model.set(a.name,this.$el[b]())}},this),_.each(a,function(a){a.on&&this.model.on("change:"+a.name,this[a.on],this)},this)},f=function(){this._scAttrs&&_.each(this._scAttrs,function(a){var b=_.keys(a),c=this.localStorage.get(a.name);c?this.set(a.name,c):-1===b.indexOf("defaultValue")&&a.value&&-1!==a.value.indexOf("$el.")?this.set(a.name,null):-1===b.indexOf("defaultValue")&&-1===a.value.indexOf("$el.")?this.set(a.name,a.value):b.indexOf("defaultValue")>-1?this.set(a.name,a.defaultValue):this.set(a.name,void 0)},this)},g=function(){this._scAttrs&&_.each(this._scAttrs,function(a){var b=_.keys(a);-1===_.indexOf(b,"defaultValue")&&a.value&&-1!==a.value.indexOf("$el.")?this.set(a.name,null):-1===_.indexOf(b,"defaultValue")&&-1===a.value.indexOf("$el.")?this.set(a.name,a.value):_.indexOf(b,"defaultValue")>-1?this.set(a.name,a.defaultValue):this.set(a.name,void 0)},this)},h=function(a){var b=a;return function(){b.prototype.set.apply(this,arguments);var a=arguments[2];if(_.isObject(arguments[0])&&(!a||!a.local)){var c=arguments[0],d=_.keys(c);_.each(d,function(a){this.localStorage.set(a,c[a])},this)}_.isObject(arguments[0])||a&&a.computed||this.localStorage.set(arguments[0],arguments[1])}},i=function(a){if(!a.name||!a.selector)throw"provide a name and/or a selector";var b,i,j=a.name,k=a.selector,l=a.attributes,m=a.initialize,n=a.base,o=["attributes","name","selector","base","plugin","initialize","listenTo","_scInitFromObject","extendModel","_scInit","_scInitDefaultValue"],p=_.omit(a,o),q=c,r=d,s=a.localStorage,t=a.extendModel||{},u=a.collection;n&&(b=_.find(_sc.Components,function(a){return a.type===n})),b&&(q=b.model,r=b.view);var v;s?(t=_.extend(t,{initialize:function(){this._super(),this._scInitDefaultValueFromLocalStorage()},set:h(q)},{useLocalStorage:!0}),v=q.extend(t)):(t=_.extend(t,{initialize:function(){this._super(),this._scInitDefaultValue()}}),v=q.extend(t));var w=r.extend({initialize:function(){_sc.debug("initialize - "+j),this._super(),this.model.componentName.toLowerCase()===this.$el.attr("data-sc-require").toLowerCase()&&(this._scInitFromObject?(this._scInit(),this._scInitFromObject()):this._scInit())}});if(v=v.extend({_scAttrs:l,_scInitDefaultValue:g,_scInitDefaultValueFromLocalStorage:f}),i=_.extend(p,{_scAttrs:l,_scInit:e,_scInitFromObject:m}),a.listenTo){var x={},y=r.prototype.listen,z=a.listenTo,A=_.keys(z);_.each(A,function(a){x[a+":$this"]=z[a]}),x=_.extend(y,x),w=_.extend(w,x)}var B;return u&&(B=Backbone.Collection.extend({model:u})),w=w.extend(i),_sc.Factories.createComponent(j,v,w,k,B)},j=function(a,b,c,d,e){var f;if(!(_.isString(a)&&b&&c&&_.isString(d)))throw"please provide a correct: type (str), model, view and el (html class or id)";return _sc.Components=_sc.Components||[],_sc.Definitions.Models[a]=b,_sc.Definitions.Views[a]=c,e&&(_sc.Definitions.Collections[a]=e),_.each(_sc.Components,function(a){if(a.el===d)throw"you are trying to add compoment with the same el (.class or #id)"}),f={type:a,model:b,view:c,el:d,collection:e},_sc.Components.push(f),f};return{createBaseComponent:i,createComponent:j}}},{"../model/baseModel":21,"../view/baseView":24}],19:[function(a,b,c){b.exports=function(a){var b=function(b,c,d){var e=b.ControlModel.extend({initialize:function(a){this._super(),d.model&&_.each(_.keys(d.model),function(a){this.model[a]=d.model[a]},this),_.each(d.attributes,function(a){var b="undefined"!=typeof a.defaultValue?a.defaultValue:null;this.set(a.name,b)},this),"undefined"!=typeof this.initialized&&this.initialized()}}),f=c.ControlView.extend({initialize:function(a){this._super();var b;a=a||{},d.view&&_.each(_.keys(d.view),function(a){this[a]=d.view[a]},this),_.each(d.attributes,function(c){var d="undefined"!=typeof c.defaultValue?c.defaultValue:null;"undefined"!=typeof d&&null!==d&&(b="undefined"!=typeof c.pluginProperty?c.pluginProperty:c.name,a[b]=d);var e=this.$el.attr("data-sc-option-"+b);e&&("true"==e&&(e=!0),"false"==e&&(e=!1),this.model.set(c.name,e),b="undefined"!=typeof c.pluginProperty?c.pluginProperty:c.name,a[b]=e)},this),_.each(d.events,function(b){if("undefined"==typeof a[b.name]){var c=this;a[b.name]=function(a,d){c.raiseEvent(b,a,d)}}},this),this.$el[d.control](a),this.widget=this.$el[d.control],this.widget=this.widget||this.$el.data(d.control),this.widget=this.widget||this.$el.data(d.namespace+d.control),_.each(d.functions,function(a){var b=this;this[a.name]=function(){if(!b.widget[a.name]){var c=b.widget;return c.apply(b.$el,[a.name,arguments[0]])}return b.widget[a.name].apply(b.widget,arguments)}},this),this.model.on("change",function(a,b){var c,e,f={};a.changed&&(_.each(_.keys(a.changed),function(b){_.find(d.attributes,function(a){return a.name==b&&a.added===!0})||(e=_.find(d.attributes,function(a){return a.name==b}),c=e&&"undefined"!=typeof e.pluginProperty?e.pluginProperty:b,f[c]=a.get(b))}),this.$el[d.control]("option",f))},this),"undefined"!=typeof this.initialized&&this.initialized()},raiseEvent:function(a,b,c){a.on&&this[a.on](b,c);var d=this.$el.attr("data-sc-id"),e=this.app[d];e&&"undefined"!=typeof e[a.name]&&e[a.name](e,b,c),d&&this.app.trigger(a.name+":"+d,b,c)}});a(d.componentName,e,f,d.selector)};return{createJQueryUIComponent:b}}},{}],20:[function(a,b,c){define("scSpeakPresenter",[],function(){var c="undefined"!=typeof window,d=c?window:b.exports,e=d.ko?d.ko:requirejs("knockout"),f=d._,g={};d.Sitecore=d.Sitecore||{},d.Sitecore.Speak=d.Sitecore.Speak||{},g=d._sc=d.Sitecore.Speak;var h=a("sc-kospeakbindingprovider")(g,e);e.bindingProvider.instance=new h.SPEAKBindingProvider;var i=a("./factories/component")(e),j=a("./factories/baseComponents")(i,e),k=a("./factories/behavior"),l=a("./component/expose"),m=a("./factories/jQueryComponent")(i.createComponent),n=a("./factories/bindingConverter");g.Factories={createComponent:i.createComponent,createBaseComponent:i.createBaseComponent,createBehavior:k.createBehavior,createBindingConverter:n.createBindingConverter,createJQueryUIComponent:m.createJQueryUIComponent},g.Factories.createBindingConverter({name:"Has",convert:function(a){return a&&a[0]?f.isArray(a[0])&&0===a[0].length?!1:!0:!1}}),g.Factories.createBindingConverter({name:"Not",convert:function(a){return!(a&&a[0])}}),__SITECOREDEBUG=!0,g.Commands={},g.debug=function(a){console.log(a)},g.Behaviors={},g.Definitions={Models:{Model:j.baseComponent.Model,ComponentModel:j.Component.Model,ControlModel:j.Control.Model,BlockModel:j.Block.Model,InputModel:j.Input.Model,ButtonBaseModel:j.Button.Model},Views:{View:j.baseComponent.View,ComponentView:j.Component.View,ControlView:j.Control.View,BlockView:j.Block.View,InputView:j.Input.View,ButtonBaseView:j.Button.View},App:{extend:function(a){return g.pageCode(a)}},Data:{}},g.Web={},g.SiteInfo={},g.SiteInfo.virtualFolder="/",g.Definitions.Collections=g.Definitions.Collections||[],j.setup();var o=(a("./extra/stringHelper")(g,f),a("./extra/layoutManager"),a("./extra/converter")(g,f),a("./extra/pipeline")(g,f),a("./extra/itemWebApi")(g,f),a("./extra/uri")(g.Definitions.Data,g,f),a("./extra/field")(g.Definitions.Data,g,f),a("./extra/items")(g.Definitions.Data,g,f),a("./extra/localstorage")(g.Definitions.Data,g,f),a("./extra/database")(g.Definitions.Data,f),function(a){return f.find(g.Components,function(b){var c=jQuery(a).hasClass(b.el.substring(1,b.el.length));return!c&&a.matches&&(c=a.matches(b.el)),c})});Sitecore.Speak.presenter({name:"SpeakPresenter",make:function(a,b,c){var d=o(b);return l(d,a,b,c,h)}})})},{"./component/expose":4,"./extra/converter":5,"./extra/database":6,"./extra/field":7,"./extra/itemWebApi":8,"./extra/items":9,"./extra/layoutManager":10,"./extra/localstorage":11,"./extra/pipeline":12,"./extra/stringHelper":13,"./extra/uri":14,"./factories/baseComponents":15,"./factories/behavior":16,"./factories/bindingConverter":17,"./factories/component":18,"./factories/jQueryComponent":19,"sc-kospeakbindingprovider":2}],21:[function(a,b,c){b.exports=function(b){var c=a("../utils/inheritance"),d=c.inherits(Backbone.Model,{ko:!0,modelType:Backbone.Model,set:function(){"use strict";var a=arguments[2];arguments[2]||(arguments[2]={});var b=(_.clone(arguments[2].silent),arguments[2].force);if(Backbone.Model.prototype.set.apply(this,arguments),a&&a.computed&&(this.computed=this.computed||{},this.computed[arguments[0]]=a),_.isObject(arguments[0])||a&&a.local||this.updateViewModel(arguments[0],b),_.isObject(arguments[0])&&(!a||!a.local)){var c=arguments[0],d=_.keys(c);_.each(d,function(a){this.updateViewModel(a)},this)}},constructor:function(a){this.ko&&(this.viewModel={}),this.defaults&&a&&_.isObject(a)&&(this.defaults=_.extend(this.defaults,a)),this.ko&&this.defaults&&(this._removeComputed(),this._creatingViewModelFromDefaults()),this.useLocalStorage&&(this.localStorage=new Sitecore.Speak.Definitions.Data.LocalStorage(a.name)),Backbone.Model.apply(this,[a]),this.ko&&(this._setComputed(),this._preventDefaultFunction(),this._creatingViewModel())},_preventDefaultFunction:function(){var a=["_creatingViewModel","_creatingViewModelFromDefaults","_setComputed","_findAppropriateAndApplyBinding","_removeComputed","_super","_preventDefaultFunction","_validate","bind","change","changedAttributes","clear","clone","constructor","destroy","escape","fetch","get","has","hasChanged","initialize","isNew","isValid","observable","off","on","parse","previous","previousAttributes","save","set","toJSON","trigger","unbind","unset","url"],b=_.functions(this);this.applicableFunctionsFromModel=_.reject(b,function(b){return _.indexOf(a,b)>=0})},_creatingViewModelFromDefaults:function(){var a=this,b=_.keys(this.defaults);_.each(b,function(a){this._findAppropriateAndApplyBinding(a,this.defaults)},this);var c={};this.applicableFunctionsFromModel&&_.each(this.applicableFunctionsFromModel,function(b){c[b]=function(){a[b].apply(a,arguments)}}),_.extend(this.viewModel,c)},_removeComputed:function(){var a=_.keys(this.defaults),b=this.defaults,c=this,d=[];_.each(a,function(a){var c=b[a];if(_.isObject(c)&&c.computed){var e=_.clone(c),f={computed:!0,read:e.read};e.write&&(f=_.extend(f,{write:e.write})),e.owner&&(f=_.extend(f,{owner:e.owner})),d.push({key:a,value:e.value,computed:f}),delete b[a]}}),c.computeds=d},_setComputed:function(){_.each(this.computeds,function(a){var b=a.value||"",c=_.extend(a.computed,{local:!0});this.set(a.key,b,a.computed,c)},this)},updateViewModel:function(a,b){(this.viewModel&&!this.viewModel[a]||b)&&this._findAppropriateAndApplyBinding(a,this.attributes,b)},_findAppropriateAndApplyBinding:function(a,c,d){var e=this.viewModel||{};if(!e[a]||d){if(_.isArray(c[a]))if(c[a].length>0&&c[a][0]&&c[a][0].modelType===Backbone.Model){var f=[];_.each(c[a],function(a){f.push(a.viewModel)}),e[a]=b.observableArray(f),e[a].nested=!0}else e[a]=b.observableArray(c[a]);else c[a]&&c[a].constructor&&_.isObject(c[a].constructor.__super__)&&c[a].ko?(e[a]=c[a].viewModel,e[a].nested=!0):this.computed&&this.computed[a]||(e[a]=b.observable(c[a]));this._registerComputed(a),this._registerSubscribe(a)}},_registerSubscribe:function(a){var b=this,c=this.subscriptions||[],d=this.viewModel||{};d[a].nested||(d[a].isComputed||b.on("change:"+a,function(){if(_.isArray(b.get(a))&&b.get(a).length>0&&b.get(a)[0]&&b.get(a)[0].modelType&&b.get(a)[0].modelType===Backbone.Model){var c=[];_.each(b.get(a),function(a){c.push(a.viewModel)}),d[a](c)}else d[a](b.get(a))}),d[a].subscribe&&(c[a]=d[a].subscribe(function(c){b.set(a,c)})))},_registerComputed:function(a){var c=this,d=this.viewModel||{};if(c.computed&&c.computed[a]){this.computed[a].write&&!this.computed[a].owner&&(c.computed[a].owner=this.viewModel);var e=_.pick(c.computed[a],"write","owner","read");e.write?d[a]=b.computed(e):d[a]=b.computed(e.read,this.viewModel),d[a].isComputed=!0}},_creatingViewModel:function(){var a=_.keys(this.attributes);_.each(a,function(a){this._findAppropriateAndApplyBinding(a,this.attributes)},this),_.each(a,this._registerComputed,this),_.each(a,this._registerSubscribe,this)}});return d.extend=c.extend,d}},{"../utils/inheritance":23}],22:[function(a,b,c){b.exports=function(a){var b=a.extend({initialize:function(){}}),c=a.extend({initialize:function(){this._super(),this.set("isVisible",!0)},toggle:function(){this.set("isVisible",!this.get("isVisible"))}}),d=a.extend({initialize:function(){this._super(),this.set("width",0),this.set("height",0)}}),e=a.extend({initialize:function(){this._super(),this.set("isEnabled",!0)}}),f=a.extend({initialize:function(){this._super(),this.set("isEnabled",!0)}});return{ComponentModel:b,ControlModel:c,BlockModel:d,InputModel:e,ButtonBaseModel:f}}},{}],23:[function(a,b,c){var d=function(){},e=function(a,b,c){var e,f=a.prototype,g=/xyz /.test(function(){xyz})?/\b_super\b/:/.*/;if(e=b&&b.hasOwnProperty("constructor")?b.constructor:function(){a.apply(this,arguments)},_.extend(e,a),d.prototype=a.prototype,e.prototype=new d,b){_.extend(e.prototype,b);var h=b.nestedlayout||e.prototype.nestedlayout,i=e.prototype.modelType===Backbone.Model;i||b.render||h||(b.render=function(){}),i||b.afterRender||h||(b.afterRender=function(){}),i||b.beforeRender||h||(b.beforeRender=function(){});for(var j in b)"function"==typeof b[j]&&"function"==typeof f[j]&&g.test(b[j])&&(e.prototype[j]=function(a,b){return function(){var c=this._super;this._super=f[a];var d=b.apply(this,arguments);return this._super=c,d}}(j,b[j])),h||i||"render"!==j&&"beforeRender"!==j&&"afterRender"!==j||(e.prototype[j]=function(a,b){return function(){if(b.apply(this,arguments),this.hasBehavior){var c=[];"render"===a&&(c=this.behaviorsRender),"afterRender"===a&&(c=this.behaviorsAfterRender),"beforeRender"===a&&(c=this.behaviorsBeforeRender),_.each(c,function(a){a.apply(this,arguments)},this)}}}(j,b[j]))}return c&&_.extend(e,c),e.prototype.constructor=e,e.__super__=a.prototype,e};b.exports={extend:function(a,b){var c=e(this,a,b);return c.extend=this.extend,c},inherits:e}},{}],24:[function(a,b,c){b.exports=function(b){var c=a("../utils/inheritance"),d=function(a){a&&(this.app=a.app?a.app:"No parent for this app",delete a.app);var b=this;a&&a.behaviors&&_.each(a.behaviors.split(" "),function(a){b.addBehavior(Sitecore.Speak.Behaviors[a])}),Backbone.View.apply(this,[a]),this.model&&this.$el&&!this.model.viewModel.$el&&(this.model.viewModel.$el=this.$el),this.model&&this.app&&!this.model.viewModel.app&&(this.model.viewModel.app=this.app),this.setupFunctionWhichCouldBeDataBound(),this.sync()};return _.extend(d.prototype,Backbone.View.prototype,{setupFunctionWhichCouldBeDataBound:function(){var a=["$","_configure","_ensureElement","setupFunctionWhichCouldBeDataBound","applyBindingsIfApplicable","bind","constructor","delegateEvents","initialize","make","off","on","remove","render","setElement","trigger","unbind","undelegateEvents","afterRender","beforeRender","sync"],b=_.functions(this);this.applicableFunctionsFromView=_.reject(b,function(b){return _.indexOf(a,b)>=0});var c=this;_.each(this.applicableFunctionsFromView,function(a){if(this.model&&this.model.viewModel[a])throw"Conflicted names between Model and View, please provide different names: "+a;this.model&&(this.model.viewModel[a]=function(){return c[a].apply(c,arguments)})},this)},sync:function(){this.model&&this.model.ko&&(__SITECOREDEBUG&&console.log("Applying Binding for the element which has the data-sc-id: "+this.$el.data("sc-id")+". The viewModel you are trying to apply is:",this.model.viewModel),b.applyBindings(this.model.viewModel?this.model.viewModel:this.model,this.$el.get(0)))},listen:{},addBehavior:function(a){if(this.hasBehavior=!0,this.behaviors=this.behaviors||[],this.behaviorsBeforeRender=this.behaviorsBeforeRender||[],this.behaviorsAfterRender=this.behaviorsAfterRender||[],this.behaviorsRender=this.behaviorsRender||[],!(a.initialize||a.afterRender||a.render||a.beforeRender))throw"behavior should have an initialize or an after Render method";a.events&&(this.events?_.extend(this.events,a.events):this.events=a.events),a.initialize&&this.behaviors.push(a.initialize),a.afterRender&&this.behaviorsAfterRender.push(a.afterRender),a.render&&this.behaviorsRender.push(a.render),a.beforeRender&&this.behaviorsBeforeRender.push(a.beforeRender);var b=_.omit(a,"initialize","events","afterRender","render","beforeRender");_.extend(this,b)}}),d.extend=c.extend,d}},{"../utils/inheritance":23}],25:[function(a,b,c){b.exports=function(a){var b=a.extend({listen:_.extend({},a.prototype.listen,{"set:$this":"set"}),initialize:function(){if(!this.model)throw"Model required in order to instantiate ComponentView";if(!this.el)throw"Element required in order to instantiate ComponentView";var a=this.$el.data("init");if(a){var b=_.keys(a);_.each(b,function(b){this.set(b,a[b])},this.model)}},set:function(a){a&&_.each(_.keys(a),function(b){this.model.set(b,a[b])},this)}}),c=b.extend({listen:_.extend({},b.prototype.listen,{"toggle:$this":"toggle","focus:$this":"focus","show:$this":"show","hide:$this":"hide"}),initialize:function(){this._super(),this.model.set("isVisible","none"!==this.$el.css("display"))},focus:function(){this.$el.focus()},hide:function(){this.model.set("isVisible",!1)},show:function(){this.model.set("isVisible",!0)},toggle:function(){this.model.toggle()}}),d=c.extend({initialize:function(){this._super(),this.model.set("width",this.$el.width()),this.model.set("height",this.$el.height())}}),e=c.extend({listen:_.extend({},b.prototype.listen,{"enable:$this":"enable","disable:$this":"disable"}),initialize:function(){this._super(),this.model.set("isEnabled","disabled"!==jQuery(this.el).attr("disabled"))},disable:function(){this.model.set("isEnabled",!1)},enable:function(){this.model.set("isEnabled",!0)}}),f=c.extend({listen:_.extend({},c.prototype.listen,{"enable:$this":"enable","disable:$this":"disable"}),initialize:function(){this._super(),this.model.set("isEnabled","disabled"!==jQuery(this.el).attr("disabled"))},click:function(){if(this.model.get("isEnabled")){var a=this.$el.attr("data-sc-click");a&&Sitecore.Speak.Helpers.invocation.execute(a,{control:this,app:this.app}),this.model._events&&this.model._events.click&&_.each(this.model._events.click,function(a){a.callback&&a.context&&a.callback.call(a.context)})}},disable:function(){this.model.set("isEnabled",!1)},enable:function(){this.model.set("isEnabled",!0)}});return b.extend=c.extend=d.extend=e.extend=f.extend=a.extend,{ComponentView:b,ControlView:c,BlockView:d,InputView:e,ButtonBaseView:f}}},{}]},{},[20]);