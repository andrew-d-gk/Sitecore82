!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.EntityService=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){(function(b){!function(b){if("function"==typeof bootstrap)bootstrap("promise",b);else if("object"==typeof d)c.exports=b();else if("function"==typeof a&&a.amd)a(b);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=b}else Q=b()}(function(){"use strict";function a(a){return function(){return W.apply(a,arguments)}}function c(a){return a===Object(a)}function d(a){return"[object StopIteration]"===cb(a)||a instanceof S}function e(a,b){if(P&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(db)){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var e=c.join("\n"+db+"\n");a.stack=f(e)}}function f(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];i(e)||g(e)||!e||c.push(e)}return c.join("\n")}function g(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function h(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function i(a){var b=h(a);if(!b)return!1;var c=b[0],d=b[1];return c===R&&d>=T&&hb>=d}function j(){if(P)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=h(c);if(!d)return;return R=d[0],d[1]}}function k(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function l(a){return s(a)?a:t(a)?C(a):B(a)}function m(){function a(a){b=a,f.source=a,Y(c,function(b,c){V(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=_(m.prototype),f=_(p.prototype);if(f.promiseDispatch=function(a,e,f){var g=X(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):V(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=function(){if(c)return f;var a=r(b);return s(a)&&(b=a),a},f.inspect=function(){return b?b.inspect():{state:"pending"}},l.longStackSupport&&P)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(l(c))},e.fulfill=function(c){b||a(B(c))},e.reject=function(c){b||a(A(c))},e.notify=function(a){b||Y(d,function(b,c){V(function(){c(a)})},void 0)},e}function n(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=m();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function o(a){return n(function(b,c){for(var d=0,e=a.length;e>d;d++)l(a[d]).then(b,c)})}function p(a,b,c){void 0===b&&(b=function(a){return A(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=_(p.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=A(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function q(a,b,c,d){return l(a).then(b,c,d)}function r(a){if(s(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function s(a){return c(a)&&"function"==typeof a.promiseDispatch&&"function"==typeof a.inspect}function t(a){return c(a)&&"function"==typeof a.then}function u(a){return s(a)&&"pending"===a.inspect().state}function v(a){return!s(a)||"fulfilled"===a.inspect().state}function w(a){return s(a)&&"rejected"===a.inspect().state}function x(){eb.length=0,fb.length=0,gb||(gb=!0)}function y(a,b){gb&&(fb.push(a),eb.push(b&&"undefined"!=typeof b.stack?b.stack:"(no stack) "+b))}function z(a){if(gb){var b=Z(fb,a);-1!==b&&(fb.splice(b,1),eb.splice(b,1))}}function A(a){var b=p({when:function(b){return b&&z(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return y(b,a),b}function B(a){return p({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return bb(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function C(a){var b=m();return V(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function D(a){return p({isDef:function(){}},function(b,c){return J(a,b,c)},function(){return l(a).inspect()})}function E(a,b,c){return l(a).spread(b,c)}function F(a){return function(){function b(a,b){var g;if("undefined"==typeof StopIteration){try{g=c[a](b)}catch(h){return A(h)}return g.done?g.value:q(g.value,e,f)}try{g=c[a](b)}catch(h){return d(h)?h.value:A(h)}return q(g,e,f)}var c=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function G(a){l.done(l.async(a)())}function H(a){throw new S(a)}function I(a){return function(){return E([this,K(arguments)],function(b,c){return a.apply(b,c)})}}function J(a,b,c){return l(a).dispatch(b,c)}function K(a){return q(a,function(a){var b=0,c=m();return Y(a,function(d,e,f){var g;s(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,q(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function L(a){return q(a,function(a){return a=$(a,l),q(K($(a,function(a){return q(a,U,U)})),function(){return a})})}function M(a){return l(a).allSettled()}function N(a,b){return l(a).then(void 0,void 0,b)}function O(a,b){return l(a).nodeify(b)}var P=!1;try{throw new Error}catch(Q){P=!!Q.stack}var R,S,T=j(),U=function(){},V=function(){function a(){for(;c.next;){c=c.next;var b=c.task;c.task=void 0;var d=c.domain;d&&(c.domain=void 0,d.enter());try{b()}catch(f){if(g)throw d&&d.exit(),setTimeout(a,0),d&&d.enter(),f;setTimeout(function(){throw f},0)}d&&d.exit()}e=!1}var c={task:void 0,next:null},d=c,e=!1,f=void 0,g=!1;if(V=function(a){d=d.next={task:a,domain:g&&b.domain,next:null},e||(e=!0,f())},"undefined"!=typeof b&&b.nextTick)g=!0,f=function(){b.nextTick(a)};else if("function"==typeof setImmediate)f="undefined"!=typeof window?setImmediate.bind(window,a):function(){setImmediate(a)};else if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(){f=i,h.port1.onmessage=a,a()};var i=function(){h.port2.postMessage(0)};f=function(){setTimeout(a,0),i()}}else f=function(){setTimeout(a,0)};return V}(),W=Function.call,X=a(Array.prototype.slice),Y=a(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;d>c;c++)c in this&&(b=a(b,this[c],c));return b}),Z=a(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),$=a(Array.prototype.map||function(a,b){var c=this,d=[];return Y(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),_=Object.create||function(a){function b(){}return b.prototype=a,new b},ab=a(Object.prototype.hasOwnProperty),bb=Object.keys||function(a){var b=[];for(var c in a)ab(a,c)&&b.push(c);return b},cb=a(Object.prototype.toString);S="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var db="From previous event:";l.resolve=l,l.nextTick=V,l.longStackSupport=!1,l.defer=m,m.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):a.resolve(arguments.length>2?X(arguments,1):c)}},l.Promise=n,l.promise=n,n.race=o,n.all=K,n.reject=A,n.resolve=l,l.passByCopy=function(a){return a},p.prototype.passByCopy=function(){return this},l.join=function(a,b){return l(a).join(b)},p.prototype.join=function(a){return l([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},l.race=o,p.prototype.race=function(){return this.then(l.race)},l.makePromise=p,p.prototype.toString=function(){return"[object Promise]"},p.prototype.then=function(a,b,c){function d(b){try{return"function"==typeof a?a(b):b}catch(c){return A(c)}}function f(a){if("function"==typeof b){e(a,h);try{return b(a)}catch(c){return A(c)}}return A(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=m(),j=!1;return V(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(d(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(d){if(c=!0,!l.onerror)throw d;l.onerror(d)}c||i.notify(b)}]),i.promise},l.when=q,p.prototype.thenResolve=function(a){return this.then(function(){return a})},l.thenResolve=function(a,b){return l(a).thenResolve(b)},p.prototype.thenReject=function(a){return this.then(function(){throw a})},l.thenReject=function(a,b){return l(a).thenReject(b)},l.nearer=r,l.isPromise=s,l.isPromiseAlike=t,l.isPending=u,p.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=v,p.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,p.prototype.isRejected=function(){return"rejected"===this.inspect().state};var eb=[],fb=[],gb=!0;l.resetUnhandledRejections=x,l.getUnhandledReasons=function(){return eb.slice()},l.stopUnhandledRejectionTracking=function(){x(),gb=!1},x(),l.reject=A,l.fulfill=B,l.master=D,l.spread=E,p.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},l.async=F,l.spawn=G,l["return"]=H,l.promised=I,l.dispatch=J,p.prototype.dispatch=function(a,b){var c=this,d=m();return V(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},l.get=function(a,b){return l(a).dispatch("get",[b])},p.prototype.get=function(a){return this.dispatch("get",[a])},l.set=function(a,b,c){return l(a).dispatch("set",[b,c])},p.prototype.set=function(a,b){return this.dispatch("set",[a,b])},l.del=l["delete"]=function(a,b){return l(a).dispatch("delete",[b])},p.prototype.del=p.prototype["delete"]=function(a){return this.dispatch("delete",[a])},l.mapply=l.post=function(a,b,c){return l(a).dispatch("post",[b,c])},p.prototype.mapply=p.prototype.post=function(a,b){return this.dispatch("post",[a,b])},l.send=l.mcall=l.invoke=function(a,b){return l(a).dispatch("post",[b,X(arguments,2)])},p.prototype.send=p.prototype.mcall=p.prototype.invoke=function(a){return this.dispatch("post",[a,X(arguments,1)])},l.fapply=function(a,b){return l(a).dispatch("apply",[void 0,b])},p.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},l["try"]=l.fcall=function(a){return l(a).dispatch("apply",[void 0,X(arguments,1)])},p.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},l.fbind=function(a){var b=l(a),c=X(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(X(arguments))])}},p.prototype.fbind=function(){var a=this,b=X(arguments);return function(){return a.dispatch("apply",[this,b.concat(X(arguments))])}},l.keys=function(a){return l(a).dispatch("keys",[])},p.prototype.keys=function(){return this.dispatch("keys",[])},l.all=K,p.prototype.all=function(){return K(this)},l.allResolved=k(L,"allResolved","allSettled"),p.prototype.allResolved=function(){return L(this)},l.allSettled=M,p.prototype.allSettled=function(){return this.then(function(a){return K($(a,function(a){function b(){return a.inspect()}return a=l(a),a.then(b,b)}))})},l.fail=l["catch"]=function(a,b){return l(a).then(void 0,b)},p.prototype.fail=p.prototype["catch"]=function(a){return this.then(void 0,a)},l.progress=N,p.prototype.progress=function(a){return this.then(void 0,void 0,a)},l.fin=l["finally"]=function(a,b){return l(a)["finally"](b)},p.prototype.fin=p.prototype["finally"]=function(a){return a=l(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},l.done=function(a,b,c,d){return l(a).done(b,c,d)},p.prototype.done=function(a,c,d){var f=function(a){V(function(){if(e(a,g),!l.onerror)throw a;l.onerror(a)})},g=a||c||d?this.then(a,c,d):this;"object"==typeof b&&b&&b.domain&&(f=b.domain.bind(f)),g.then(void 0,f)},l.timeout=function(a,b,c){return l(a).timeout(b,c)},p.prototype.timeout=function(a,b){var c=m(),d=setTimeout(function(){c.reject(new Error(b||"Timed out after "+a+" ms"))},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},l.delay=function(a,b){return void 0===b&&(b=a,a=void 0),l(a).delay(b)},p.prototype.delay=function(a){return this.then(function(b){var c=m();return setTimeout(function(){c.resolve(b)},a),c.promise})},l.nfapply=function(a,b){return l(a).nfapply(b)},p.prototype.nfapply=function(a){var b=m(),c=X(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},l.nfcall=function(a){var b=X(arguments,1);return l(a).nfapply(b)},p.prototype.nfcall=function(){var a=X(arguments),b=m();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},l.nfbind=l.denodeify=function(a){var b=X(arguments,1);return function(){var c=b.concat(X(arguments)),d=m();return c.push(d.makeNodeResolver()),l(a).fapply(c).fail(d.reject),d.promise}},p.prototype.nfbind=p.prototype.denodeify=function(){var a=X(arguments);return a.unshift(this),l.denodeify.apply(void 0,a)},l.nbind=function(a,b){var c=X(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(X(arguments)),f=m();return e.push(f.makeNodeResolver()),l(d).fapply(e).fail(f.reject),f.promise}},p.prototype.nbind=function(){var a=X(arguments,0);return a.unshift(this),l.nbind.apply(void 0,a)},l.nmapply=l.npost=function(a,b,c){return l(a).npost(b,c)},p.prototype.nmapply=p.prototype.npost=function(a,b){var c=X(b||[]),d=m();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},l.nsend=l.nmcall=l.ninvoke=function(a,b){var c=X(arguments,2),d=m();return c.push(d.makeNodeResolver()),l(a).dispatch("post",[b,c]).fail(d.reject),d.promise},p.prototype.nsend=p.prototype.nmcall=p.prototype.ninvoke=function(a){var b=X(arguments,1),c=m();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},l.nodeify=O,p.prototype.nodeify=function(a){return a?void this.then(function(b){V(function(){a(null,b)})},function(b){V(function(){a(b)})}):this};var hb=j();return l})}).call(this,b("+NscNm"))},{"+NscNm":3}],2:[function(a,b){function c(a){return a?d(a):void 0}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}b.exports=c,c.prototype.on=c.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},c.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if(d=c[e],d===b||d.fn===b){c.splice(e,1);break}return this},c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],3:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],4:[function(a,b){b.exports=a(1)},{"+NscNm":3}],5:[function(a,b){var c=[],d=Object.getOwnPropertyNames(Array.prototype),e=function(a){return a===Object(a)},f=function(a,b){var d,f,g=a[b];return c.forEach(function(a){a===b&&(d=!0)}),d||void 0===g?!1:(g||(g=""),f=g.toString(),Array.isArray(g)?!0:!e(g)&&"[object Function]"!==f&&"[object RegExp]"!==f)},g={subscribers:{any:[]},subscribe:function(a,b,c){a=a||"any",b="function"==typeof b?b:c[b],"undefined"==typeof this.subscribers[a]&&(this.subscribers[a]=[]),this.subscribers[a].push({fn:b,context:c||this})},remove:function(a,b,c){this.processSubscribers("unsubscribe",a,b,c)},notify:function(a,b){this.processSubscribers("publish",a,b)},processSubscribers:function(a,b,c,d){var e,f=b||"any",g=this.subscribers[f],h=this.subscribers.any||[],i=h.length,j=g?g.length:0;for(e=0;j>e;e++)"publish"===a?g[e].fn.call(g[e].context,c):g[e].fn===c&&g[e].context===d&&g.splice(e,1);for(e=0;i>e;e++)h[e].fn.call(h[e].context,this)}},h=function(a){var b;for(b in g)g.hasOwnProperty(b)&&"function"==typeof g[b]&&(a[b]=g[b]);a.subscribers={any:[]}},i=function(a){this.underlying=a,h(this)};i.prototype.actionList={join:["change","join"],pop:["remove","change","pop"],slice:["change","slice"],push:["add","change","push"],concat:["add","change","concat"],shift:["remove","change","shift"],unshift:["add","change","unshift"],reverse:["change","reverse"],sort:["change","sort"]},d.forEach(function(a){if("length"!==a){var b=i.prototype.actionList[a];i.prototype[a]=b&&"toString"!==a?function(){var b=this,c=arguments,d=this.underlying,e=Array.prototype[a].apply(d,arguments),f=this.actionList[a];return f.forEach(function(a){b.notify(a,c[0])}),e}:function(){var b=(this.underlying,Array.prototype[a].apply(this.underlying,arguments));return b}}}),Object.defineProperty(i.prototype,"length",{get:function(){return this.underlying.length},set:function(a){var b=this.underlying.length;if(a>b)for(var c=b;a>c;c++)this.push(void 0);else this.underlying.length=a}});var j=function(a){var b=new i(a);return b},k=function(a){a.__properties={},Object.defineProperty(a,"__observable",{value:!0});var b=function(b){Array.isArray(d)?a[b]=j(d):(Object.defineProperty(a,b,{get:function(){return this.__properties[b]},set:function(a){this.__properties[b]!==a&&(this.__properties[b]=a,this.notify("change:"+b,a))}}),a[b]=d)};for(var c in a)if(!g[c]&&a.hasOwnProperty(c)&&f(a,c)){var d=a[c];b(c)}},l=function(a,b){return a.__observable===!0?a:(c=b||[],h(a),k(a),a)};b.exports={publishable:h,observable:l,observableArray:j}},{}],6:[function(a,b){b.exports={defaultHttpMethod:"GET",maxNumberOfConcurrentXhr:5,idKey:"ItemID"}},{}],7:[function(a,b,c){var d=a("sc-is"),e=a("./item"),f=a("./config.json"),g=a("sc-query"),h=(a("q"),a("sc-merge")),i=a("sc-hasKey"),j=a("emitter-component"),k=a("sc-optionify"),l=a("sc-extendify"),m=l({init:function(a){var b=this;b.option(h({},a)),b.url=i(b.options,"url","string")?b.options.url:"",b.type=i(b.options,"type","string")?b.options.type:f.defaultHttpMethod,b.headers=i(b.options,"headers","object")?b.options.headers:{}},get:function(a,b){var c=this;return a=d.a.string(a)?a:c.url,b=d.an.object(a)?a:b||{},b=h(b,{headers:c.headers}),new g(c.url,"get",b)},put:function(a,b){var c=this;return a=d.a.string(a)?a:c.url,b=d.an.object(a)?a:b||{},b=h(b,{headers:c.headers}),new g(c.url,"put",b)},post:function(a,b){var c=this;return a=d.a.string(a)?a:c.url,b=d.an.object(a)?a:b||{},b=h(b,{headers:c.headers}),new g(c.url,"post",b)},"delete":function(a,b){var c=this;return a=d.a.string(a)?a:c.url,b=d.an.object(a)?a:b||{},b=h(b,{headers:c.headers}),new g(c.url,"delete",b)}});j(m.prototype),k(m.prototype),c=b.exports=m,c.config=f,c.Query=g,c.Item=e},{"./config.json":6,"./item":8,"emitter-component":2,q:4,"sc-extendify":10,"sc-hasKey":12,"sc-is":16,"sc-merge":22,"sc-optionify":25,"sc-query":28}],8:[function(a,b){var c=a("sc-is"),d=(a("q"),a("sc-pick")),e=a("sc-hasKey"),f=a("emitter-component"),g=a("sc-omit"),h=a("sc-optionify"),i=a("sc-extendify"),j=function(a,b){var d=a;b=c.an.object(b)?b:{},Object.defineProperties(d,{isTrackable:{get:function(){return d.__trackable===!0}},__originalKeys:{value:Object.keys(b)}})},k=i({init:function(a,b){this.option(c.an.object(b)?b:{}),j(this,a,b)},json:function(a){var b=this;return a=a||d(b,b.__originalKeys),Object.keys(a).forEach(function(b){(e(a,b+".underlying","array")||e(a,b+".array","array"))&&e(a,b+".subscribe","function")&&(a[b]=a[b].array||a[b].underlying)}),b.__optionify&&(a=g(a,["options"])),a}});f(k.prototype),h(k.prototype),b.exports=k},{"emitter-component":2,q:4,"sc-extendify":10,"sc-hasKey":12,"sc-is":16,"sc-omit":24,"sc-optionify":25,"sc-pick":26}],9:[function(a,b){var c=function(a){var b=!1,c=/xyz/.test(function(){})?/\b_super\b/:/.*/,d=function(){};return d.extend=function(a){function d(){!b&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;b=!0;var f=new this;b=!1;for(var g in a)f[g]="function"==typeof a[g]&&"function"==typeof e[g]&&c.test(a[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,a[g]):a[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d},d.extend(a)};b.exports=c},{}],10:[function(a,b){var c=a("sc-haskey"),d=a("sc-merge"),e=a("sc-omit"),f=a("./extend.johnresig.js"),g=function(){},h=function(a){var b,h;return a="function"==typeof a||"object"==typeof a?a:{},h=a.prototype||a,b=d(e(h,["constructor","init"])),b.init=c(a,"prototype.constructor","function")?a.prototype.constructor:c(a,"init","function")?a.init:"function"==typeof a?a:g,f(b)};b.exports=h},{"./extend.johnresig.js":9,"sc-haskey":14,"sc-merge":22,"sc-omit":24}],11:[function(a,b,c){var d="{?[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}}?";c.generate=function(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:7&c|8).toString(16)});return b},c.match=function(a){var b=new RegExp(d,"g"),c=("string"==typeof a?a:"").match(b);return Array.isArray(c)?c:[]},c.isValid=function(a){var b=new RegExp(d);return b.test(a)}},{}],12:[function(a,b){function c(a,b,f){a="object"===d(a)?a:{},b="array"===d(b)?b:[],f="string"===d(f)?f:"";var g=b.length>0?b.shift():"",h=e.call(a,g)||void 0!==a[g],i=h?a[g]:void 0,j=d(i)===f;return b.length>0&&h?c(a[g],b,f):b.length>0||""===f?h:h&&j}var d=a("type-component"),e=Object.prototype.hasOwnProperty;b.exports=function(a,b,e){return b="string"===d(b)?b.split("."):[],c(a,b,e)}},{"type-component":13}],13:[function(a,b){var c=Object.prototype.toString;b.exports=function(a){switch(c.call(a)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===a?"null":void 0===a?"undefined":a===Object(a)?"object":typeof a}},{}],14:[function(a,b){b.exports=a(12)},{"type-component":15}],15:[function(a,b){b.exports=a(13)},{}],16:[function(a,b,c){var d=a("./ises/type"),e={a:{},an:{},not:{a:{},an:{}}},f={arguments:["arguments",d("arguments")],array:["array",d("array")],"boolean":["boolean",d("boolean")],date:["date",d("date")],"function":["function","func","fn",d("function")],"null":["null",d("null")],number:["number","integer","int",d("number")],object:["object",d("object")],regexp:["regexp",d("regexp")],string:["string",d("string")],undefined:["undefined",d("undefined")],empty:["empty",a("./ises/empty")],nullorundefined:["nullOrUndefined","nullorundefined",a("./ises/nullorundefined")],guid:["guid",a("./ises/guid")]};Object.keys(f).forEach(function(a){var b=f[a].slice(0,f[a].length-1),c=f[a][f[a].length-1];b.forEach(function(a){e[a]=e.a[a]=e.an[a]=c,e.not[a]=e.not.a[a]=e.not.an[a]=function(){return c.apply(this,arguments)?!1:!0}})}),c=b.exports=e,c.type=d},{"./ises/empty":17,"./ises/guid":18,"./ises/nullorundefined":19,"./ises/type":20}],17:[function(a,b){var c=a("../type");b.exports=function(a){var b=!1;return"null"===c(a)||"undefined"===c(a)?b=!0:"object"===c(a)?b=0===Object.keys(a).length:"boolean"===c(a)?b=a===!1:"number"===c(a)?b=0===a||-1===a:("array"===c(a)||"string"===c(a))&&(b=0===a.length),b}},{"../type":21}],18:[function(a,b){var c=a("sc-guid");b.exports=function(a){return c.isValid(a)}},{"sc-guid":11}],19:[function(a,b){b.exports=function(a){return null===a||void 0===a||void 0===a}},{}],20:[function(a,b){var c=a("../type");b.exports=function(a){return function(b){return c(b)===a}}},{"../type":21}],21:[function(a,b){var c=Object.prototype.toString;b.exports=function(a){switch(c.call(a)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===a?"null":void 0===a?"undefined":a===Object(a)?"object":typeof a}},{}],22:[function(a,b){var c=a("type-component"),d=function(){var a=Array.prototype.slice.call(arguments),b="boolean"===c(a[0])?a.shift():!1,e=a,f={};return e.forEach(function(a){"object"===c(a)&&Object.keys(a).forEach(function(e){Object.prototype.hasOwnProperty.call(a,e)&&(f[e]=b&&"object"===c(a[e])?d(b,{},f[e],a[e]):a[e])})}),f};b.exports=d},{"type-component":23}],23:[function(a,b){b.exports=a(13)},{}],24:[function(a,b){function c(a,b){var c={};return a!==Object(a)?c:(b=Array.isArray(b)?b:[],Object.keys(a).forEach(function(d){var e=!0;b.forEach(function(a){e===!0&&d===a&&(e=!1)}),e===!0&&(c[d]=a[d])}),c)}b.exports=c},{}],25:[function(a,b){var c=a("sc-merge"),d=function(a,b){var d="function"==typeof a,e=d?a.prototype:a;Object.hasOwnProperty.call(e,"__optionify")&&e.__optionify===!0||(b=c({propertyName:"options",methodName:"option"},b),e[b.propertyName]={},Object.defineProperty(e,"__optionify",{value:!0}),Object.defineProperty(e,b.methodName,{value:function(a,c){return"string"==typeof a?2===arguments.length?(this[b.propertyName][a]=c,this):this[b.propertyName][a]:"object"==typeof a?(this[b.propertyName]=a,this):void 0}}))};b.exports=d},{"sc-merge":22}],26:[function(a,b){function c(a,b){var c={};return a!==Object(a)?c:(b=Array.isArray(b)?b:[],Object.keys(a).forEach(function(d){var e=!1;b.forEach(function(a){e===!1&&d===a&&(e=!0)}),e===!0&&(c[d]=a[d])}),c)}b.exports=c},{}],27:[function(a,b){b.exports={defaults:{defaultHttpMethod:"get"}}},{}],28:[function(a,b,c){var d=a("q"),e=a("./config.json"),f=a("sc-extendify"),g=a("./utils"),h=f({init:function(a,b,c){var d=this;d.url=a,d.type=g.is.string(b)?b:e.defaults.defaultHttpMethod,d.options=g.is.an.object(c)?c:{},d.__parameters={},d.__queries={},d.__headers={},d.options.headers&&(d.__headers=g.merge(d.__headers,d.options.headers))},parameters:function(a){var b=this;return g.is.an.object(a)?(b.__parameters=g.merge(b.__parameters,a),b):b.__parameters},parameter:function(a,b){var c=this;return c.__parameters.hasOwnProperty(a)&&g.is.empty(b)?c.__parameters[a]:(c.__parameters[a]=b,c)},queries:function(a){var b=this;return g.is.an.object(a)?(b.__queries=g.merge(b.__queries,a),b):b.__queries},query:function(a,b){var c=this;return c.__queries.hasOwnProperty(a)&&g.is.empty(b)?c.__queries[a]:(c.__queries[a]=b,c)},header:function(a,b){var c=this;return c.__headers.hasOwnProperty(a)&&g.is.empty(b)?c.__headers[a]:(c.__headers[a]=b,c)},execute:function(){var a,b=this,c=d.defer(),e=d.defer();return a={type:b.type,url:b.url,data:b.__parameters,query:b.__queries,header:b.__headers},b.middleware("preRequest",function(a,b){b=!a||a instanceof Error?b:a,a=a instanceof Error?a:null,a?e.reject(a):c.resolve(b)},a),c.promise.then(function(a){g.request(a).then(function(a){b.middleware("postRequest",function(a,b){b=!a||a instanceof Error?b:a,a=a instanceof Error?a:null,a?e.reject(a):e.resolve(b)},a)}).fail(e.reject)}).fail(e.reject),e.promise}});h.prototype.param=h.prototype.parameter,g.optionify(h),g.useify(h),c=b.exports=h,c.utils=g,c.config=e},{"./config.json":27,"./utils":29,q:4,"sc-extendify":10}],29:[function(a,b){b.exports={merge:a("sc-merge"),optionify:a("sc-optionify"),request:a("sc-request"),useify:a("sc-useify"),is:a("sc-is")}},{"sc-is":16,"sc-merge":22,"sc-optionify":25,"sc-request":31,"sc-useify":52}],30:[function(a,b){b.exports={defaults:{options:{maxNumberOfConcurrentXhr:5,language:{undefinedStatusMessage:"The server returned an undefined status message",malformedServerResponse:"Malformed server response. Expected a JSON object but got plain text"}}}}},{}],31:[function(a,b,c){var d,e=a("./config.json"),f=a("q"),g=a("superagent"),h=a("sc-queue"),i=a("sc-haskey"),j=(a("sc-guid"),a("sc-merge")),k=a("sc-is"),l=a("sc-useify"),m=function(a){var b=this;a=j(e.defaults.options,a),d=new h(function(c,d){g(c.data.type,c.data.url)[/get/i.test(c.data.type)?"query":"send"](c.data.data).query(c.data.query).set(c.data.header||{}).accept("json").type("json").end(function(e,f){var g=i(f,"body","object")||i(f,"body","array")?f.body:null,h=i(f,"text","string")?f.text.trim():"",j=i(f,"xhr.statusText","string")?f.xhr.statusText.trim():"";e||f.ok===!0||(e=new Error(h||j||a.language.undefinedStatusMessage)),e||g||!/^get$/i.test(c.data.type)||(e=new Error(a.language.malformedServerResponse)),b.middleware("postRequest",function(a,b){d(e||a,{defer:c.defer,response:b||f})},e,f)})},a.maxNumberOfConcurrentXhr)};m.prototype.call=function(a){var b=f.defer(),c={data:a,defer:b};return c.data.query=k.an.object(c.data.query)?c.data.query:{},d.push(c,function(a,c){b[a?"reject":"resolve"](a||c.response.body)}),b.promise},l(m),c=b.exports=function(a,b){var c=f.defer(),d=new m(b);return d.call(a,b).then(c.resolve).fail(c.reject),c.promise},c.use=m.use,c.useify=m.useify},{"./config.json":30,q:4,"sc-guid":11,"sc-haskey":14,"sc-is":16,"sc-merge":22,"sc-queue":32,"sc-useify":52,superagent:33}],32:[function(a,b){function c(a,b){var c=this;c.worker=a,c.concurrency=e.a.number(b)?b:1,c.pending=0,c.jobs=[],c.errors=[]}var d,e=a("sc-is"),f=function(){};c.prototype.drain=f,c.prototype.push=function(a,b){var c=this;b=e.a.func(b)?b:f,c.jobs.push({data:a,callback:b}),setTimeout(c.run.bind(c),0)},c.prototype.run=function(){for(var a=this;a.pending<a.concurrency;){var b=a.jobs.shift();if(!b)break;a.exec(b)}},c.prototype.exec=function(a){var b=this;b.pending++,b.worker(a.data,function(c){c&&b.errors.push({data:a.data,error:c}),a.callback.apply(b,arguments),b.pending--,b.run(),clearTimeout(d),d=setTimeout(function(){0===b.jobs.length&&(b.drain(b.errors.length>0?b.errors:null),b.errors=[])},10)})},b.exports=c},{"sc-is":16}],33:[function(a,b){function c(){}function d(a){var b={}.toString.call(a);switch(b){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function e(){if(q.XMLHttpRequest&&("file:"!=q.location.protocol||!q.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")
}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}return!1}function f(a){return a===Object(a)}function g(a){if(!f(a))return a;var b=[];for(var c in a)null!=a[c]&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}function h(a){for(var b,c,d={},e=a.split("&"),f=0,g=e.length;g>f;++f)c=e[f],b=c.split("="),d[decodeURIComponent(b[0])]=decodeURIComponent(b[1]);return d}function i(a){var b,c,d,e,f=a.split(/\r?\n/),g={};f.pop();for(var h=0,i=f.length;i>h;++h)c=f[h],b=c.indexOf(":"),d=c.slice(0,b).toLowerCase(),e=r(c.slice(b+1)),g[d]=e;return g}function j(a){return a.split(/ *; */).shift()}function k(a){return p(a.split(/ *; */),function(a,b){var c=b.split(/ *= */),d=c.shift(),e=c.shift();return d&&e&&(a[d]=e),a},{})}function l(a,b){b=b||{},this.req=a,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=i(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text):null}function m(a,b){var c=this;o.call(this),this._query=this._query||[],this.method=a,this.url=b,this.header={},this._header={},this.on("end",function(){var b=new l(c);"HEAD"==a&&(b.text=null),c.callback(null,b)})}function n(a,b){return"function"==typeof b?new m("GET",a).end(b):1==arguments.length?new m("GET",a):new m(a,b)}var o=a("emitter"),p=a("reduce"),q="undefined"==typeof window?this:window,r="".trim?function(a){return a.trim()}:function(a){return a.replace(/(^\s*|\s*$)/g,"")};n.serializeObject=g,n.parseString=h,n.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},n.serialize={"application/x-www-form-urlencoded":g,"application/json":JSON.stringify},n.parse={"application/x-www-form-urlencoded":h,"application/json":JSON.parse},l.prototype.get=function(a){return this.header[a.toLowerCase()]},l.prototype.setHeaderProperties=function(){var a=this.header["content-type"]||"";this.type=j(a);var b=k(a);for(var c in b)this[c]=b[c]},l.prototype.parseBody=function(a){var b=n.parse[this.type];return b?b(a):null},l.prototype.setStatusProperties=function(a){var b=a/100|0;this.status=a,this.statusType=b,this.info=1==b,this.ok=2==b,this.clientError=4==b,this.serverError=5==b,this.error=4==b||5==b?this.toError():!1,this.accepted=202==a,this.noContent=204==a||1223==a,this.badRequest=400==a,this.unauthorized=401==a,this.notAcceptable=406==a,this.notFound=404==a,this.forbidden=403==a},l.prototype.toError=function(){var a=this.req,b=a.method,c=a.path,d="cannot "+b+" "+c+" ("+this.status+")",e=new Error(d);return e.status=this.status,e.method=b,e.path=c,e},n.Response=l,o(m.prototype),m.prototype.timeout=function(a){return this._timeout=a,this},m.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},m.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},m.prototype.set=function(a,b){if(f(a)){for(var c in a)this.set(c,a[c]);return this}return this._header[a.toLowerCase()]=b,this.header[a]=b,this},m.prototype.getHeader=function(a){return this._header[a.toLowerCase()]},m.prototype.type=function(a){return this.set("Content-Type",n.types[a]||a),this},m.prototype.accept=function(a){return this.set("Accept",n.types[a]||a),this},m.prototype.auth=function(a,b){var c=btoa(a+":"+b);return this.set("Authorization","Basic "+c),this},m.prototype.query=function(a){return"string"!=typeof a&&(a=g(a)),a&&this._query.push(a),this},m.prototype.send=function(a){var b=f(a),c=this.getHeader("Content-Type");if(b&&f(this._data))for(var d in a)this._data[d]=a[d];else"string"==typeof a?(c||this.type("form"),c=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==c?this._data?this._data+"&"+a:a:(this._data||"")+a):this._data=a;return b?(c||this.type("json"),this):this},m.prototype.callback=function(a,b){var c=this._callback;return 2==c.length?c(a,b):a?this.emit("error",a):void c(b)},m.prototype.crossDomainError=function(){var a=new Error("Origin is not allowed by Access-Control-Allow-Origin");a.crossDomain=!0,this.callback(a)},m.prototype.timeoutError=function(){var a=this._timeout,b=new Error("timeout of "+a+"ms exceeded");b.timeout=a,this.callback(b)},m.prototype.withCredentials=function(){return this._withCredentials=!0,this},m.prototype.end=function(a){var b=this,f=this.xhr=e(),g=this._query.join("&"),h=this._timeout,i=this._data;if(this._callback=a||c,f.onreadystatechange=function(){return 4==f.readyState?0==f.status?b.aborted?b.timeoutError():b.crossDomainError():void b.emit("end"):void 0},f.upload&&(f.upload.onprogress=function(a){a.percent=a.loaded/a.total*100,b.emit("progress",a)}),h&&!this._timer&&(this._timer=setTimeout(function(){b.abort()},h)),g&&(g=n.serializeObject(g),this.url+=~this.url.indexOf("?")?"&"+g:"?"+g),f.open(this.method,this.url,!0),this._withCredentials&&(f.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof i&&!d(i)){var j=n.serialize[this.getHeader("Content-Type")];j&&(i=j(i))}for(var k in this.header)null!=this.header[k]&&f.setRequestHeader(k,this.header[k]);return f.send(i),this},n.Request=m,n.get=function(a,b,c){var d=n("GET",a);return"function"==typeof b&&(c=b,b=null),b&&d.query(b),c&&d.end(c),d},n.head=function(a,b,c){var d=n("HEAD",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.del=function(a,b){var c=n("DELETE",a);return b&&c.end(b),c},n.patch=function(a,b,c){var d=n("PATCH",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.post=function(a,b,c){var d=n("POST",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},n.put=function(a,b,c){var d=n("PUT",a);return"function"==typeof b&&(c=b,b=null),b&&d.send(b),c&&d.end(c),d},b.exports=n},{emitter:34,reduce:35}],34:[function(a,b){function c(a){return a?d(a):void 0}function d(a){for(var b in c.prototype)a[b]=c.prototype[b];return a}b.exports=c,c.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},c.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},b._off=c,this.on(a,c),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;var d=c.indexOf(b._off||b);return~d&&c.splice(d,1),this},c.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;e>d;++d)c[d].apply(this,b)}return this},c.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},c.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],35:[function(a,b){b.exports=function(a,b,c){for(var d=0,e=a.length,f=3==arguments.length?c:a[d++];e>d;)f=b.call(null,f,a[d],++d,a);return f}},{}],36:[function(a,b){var c=a("sc-contains"),d=a("sc-is"),e=function(a,b,f,g){var h,i,j=b.toLowerCase(),k=d.an.array(g)?g:[];switch(!0){case/float|integer/.test(j):j="number"}if(d.a.hasOwnProperty(j)?i=d.a[j](a):"*"===j&&(i=!0),i)h=a;else switch(!0){case"array"===j:try{if(d.a.string(a)&&(h=JSON.parse(a)),d.not.an.array(h))throw""}catch(l){d.not.nullOrUndefined(a)&&(h=[a])}break;case"boolean"===j:try{h=/^(true|1|y|yes)$/i.test(a.toString())?!0:void 0}catch(l){}if(d.not.a.boolean(h))try{h=/^(false|-1|0|n|no)$/i.test(a.toString())?!1:void 0}catch(l){}h=d.a.boolean(h)?h:void 0;break;case"date"===j||"datetime"===j:try{h=new Date(a),h=isNaN(h.getTime())?void 0:h}catch(l){}break;case"string"===j:d.a.string(a)&&(h=a),(d.a.boolean(a)||d.a.number(a))&&(h=a.toString());break;case"number"===j:try{if(d.a.array(a)||d.a.guid(a))throw"wrong number";h=parseFloat(a),(d.not.a.number(h)||isNaN(h))&&(h=void 0)}catch(l){h=void 0}if(void 0!==h)switch(!0){case"integer"===b:h=parseInt(h,10)}break;default:try{h=e(JSON.parse(a),j)}catch(l){}}return k.length>0&&!c(k,h)&&(h=k[0]),d.not.undefined(h)?h:d.not.undefined(f)?f:null};b.exports=e},{"sc-contains":37,"sc-is":16}],37:[function(a,b){var c=function(a,b){var c=!1;return Array.isArray(a)?a.forEach(function(a){c===!1&&b===a&&(c=!0)}):Object(a)===a&&Object.keys(a).forEach(function(d){c===!1&&a[d]===b&&(c=!0)}),c};b.exports=c},{}],38:[function(a,b){b.exports=a("../tmp/lodash.custom")._.where},{"../tmp/lodash.custom":39}],39:[function(a,b,c){(function(){function a(){return u.pop()||[]}function d(){}function e(a){a.length=0,u.length<w&&u.push(a)}function f(){}function g(a,b,c){if("function"!=typeof a)return t;if("undefined"==typeof b)return a;var d=a.__bindData__||ib.funcNames&&!a.name;if("undefined"==typeof d){var e=y&&V.call(a);ib.funcNames||!e||x.test(e)||(d=!0),(ib.funcNames||!d)&&(d=!ib.funcDecomp||y.test(e),kb(a,d))}if(d!==!0&&d&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return r(a,b)}function h(b,c,d,f,g,i){if(d){var j=d(b,c);if("undefined"!=typeof j)return!!j}if(b===c)return 0!==b||1/b==1/c;var k=typeof b,l=typeof c;if(!(b!==b||b&&M[k]||c&&M[l]))return!1;if(null==b||null==c)return b===c;var o=Z.call(b),p=Z.call(c);if(o==A&&(o=H),p==A&&(p=H),o!=p)return!1;switch(o){case C:case D:return+b==+c;case G:return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case I:case J:return b==String(c)}var q=o==B;if(!q){if(W.call(b,"__wrapped__ ")||W.call(c,"__wrapped__"))return h(b.__wrapped__||b,c.__wrapped__||c,d,f,g,i);if(o!=H)return!1;var r=!ib.argsObject&&m(b)?Object:b.constructor,s=!ib.argsObject&&m(c)?Object:c.constructor;if(r!=s&&!(n(r)&&r instanceof r&&n(s)&&s instanceof s))return!1}var t=!g;g||(g=a()),i||(i=a());for(var u=g.length;u--;)if(g[u]==b)return i[u]==c;var v=0;if(j=!0,g.push(b),i.push(c),q){if(u=b.length,v=c.length,j=v==b.length,!j&&!f)return j;for(;v--;){var w=u,x=c[v];if(f)for(;w--&&!(j=h(b[w],x,d,f,g,i)););else if(!(j=h(b[v],x,d,f,g,i)))break}return j}return rb(c,function(a,c,e){return W.call(e,c)?(v++,j=W.call(b,c)&&h(b[c],a,d,f,g,i)):void 0}),j&&!f&&rb(b,function(a,b,c){return W.call(c,b)?j=--v>-1:void 0}),t&&(e(g),e(i)),j}function i(a,b,c,d,e,f){var g=1&b,h=2&b,j=4&b,k=8&b,m=16&b,p=32&b,q=a;if(!h&&!n(a))throw new TypeError;m&&!c.length&&(b&=-17,m=c=!1),p&&!d.length&&(b&=-33,p=d=!1);var r=a&&a.__bindData__;if(r)return!g||1&r[1]||(r[4]=e),!g&&1&r[1]&&(b|=8),!j||4&r[1]||(r[5]=f),m&&X.apply(r[2]||(r[2]=[]),c),p&&X.apply(r[3]||(r[3]=[]),d),r[1]|=b,i.apply(null,r);if(g&&!(h||j||p)&&(ib.fastBind||ab&&m)){if(m){var s=[e];X.apply(s,c)}var t=m?ab.apply(a,s):ab.call(a,e)}else t=function(){var n=arguments,r=g?e:this;if((j||m||p)&&(n=eb.call(n),m&&$.apply(n,c),p&&X.apply(n,d),j&&n.length<f))return b|=16,i(a,k?b:-4&b,n,null,e,f);if(h&&(a=r[q]),this instanceof t){r=l(a.prototype);var s=a.apply(r,n);return o(s)?s:r}return a.apply(r,n)};return kb(t,eb.call(arguments)),t}function j(){L.shadowedProps=z,L.array=L.bottom=L.loop=L.top="",L.init="iterable",L.useHas=!0;for(var a,b=0;a=arguments[b];b++)for(var c in a)L[c]=a[c];var d=L.args;L.firstArg=/^[^,]+/.exec(d)[0];var e=Function("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+d+") {\n"+jb(L)+"\n}");return e(g,E,R,W,v,m,lb,p,L.keys,S,M,hb,J,T,Z)}function l(a){return o(a)?bb(a):{}}function m(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Z.call(a)==A||!1}function n(a){return"function"==typeof a}function o(a){return!(!a||!M[typeof a])}function p(a){return"string"==typeof a||Z.call(a)==J}function q(a,b,c){var d=[];if(b=f.createCallback(b,c,3),lb(a))for(var e=-1,g=a.length;++e<g;){var h=a[e];b(h,e,a)&&d.push(h)}else qb(a,function(a,c,e){b(a,c,e)&&d.push(a)});return d}function r(a,b){return arguments.length>2?i(a,17,eb.call(arguments,2),null,b):i(a,1,null,null,b)}function s(a,b,c){var d=typeof a;if(null==a||"function"==d)return g(a,b,c);if("object"!=d)return function(b){return b[a]};var e=nb(a),f=e[0],i=a[f];return 1!=e.length||i!==i||o(i)?function(b){for(var c=e.length,d=!1;c--&&(d=h(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return i===b&&(0!==i||1/i==1/b)}}function t(a){return a}var u=[],v={},w=40,x=/^function[ \n\r\t]+\w/,y=/\bthis\b/,z=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],A="[object Arguments]",B="[object Array]",C="[object Boolean]",D="[object Date]",E="[object Error]",F="[object Function]",G="[object Number]",H="[object Object]",I="[object RegExp]",J="[object String]",K={configurable:!1,enumerable:!1,value:null,writable:!1},L={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},M={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},N=M[typeof window]&&window||this,O=M[typeof c]&&c&&!c.nodeType&&c,P=M[typeof b]&&b&&!b.nodeType&&b,Q=[],R=Error.prototype,S=Object.prototype,T=String.prototype,U=RegExp("^"+String(S.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),V=Function.prototype.toString,W=S.hasOwnProperty,X=Q.push,Y=S.propertyIsEnumerable,Z=S.toString,$=Q.unshift,_=function(){try{var a={},b=U.test(b=Object.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),ab=U.test(ab=Z.bind)&&ab,bb=U.test(bb=Object.create)&&bb,cb=U.test(cb=Array.isArray)&&cb,db=U.test(db=Object.keys)&&db,eb=Q.slice,fb=U.test(N.attachEvent),gb=ab&&!/\n|true/.test(ab+fb),hb={};hb[B]=hb[D]=hb[G]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},hb[C]=hb[J]={constructor:!0,toString:!0,valueOf:!0},hb[E]=hb[F]=hb[I]={constructor:!0,toString:!0},hb[H]={constructor:!0},function(){for(var a=z.length;a--;){var b=z[a];for(var c in hb)W.call(hb,c)&&!W.call(hb[c],b)&&(hb[c][b]=!1)}}();var ib=f.support={};!function(){var a=function(){this.x=1},b={0:1,length:1},c=[];a.prototype={valueOf:1,y:1};for(var d in new a)c.push(d);for(d in arguments);ib.argsClass=Z.call(arguments)==A,ib.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),ib.enumErrorProps=Y.call(R,"message")||Y.call(R,"name"),ib.enumPrototypes=Y.call(a,"prototype"),ib.fastBind=ab&&!gb,ib.funcDecomp=!U.test(N.WinRTError)&&y.test(function(){return this}),ib.funcNames="string"==typeof Function.name,ib.nonEnumArgs=0!=d,ib.nonEnumShadows=!/valueOf/.test(c),ib.spliceObjects=(Q.splice.call(b,0,1),!b[0]),ib.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1);var jb=function(a){var b="var index, iterable = "+a.firstArg+", result = "+a.init+";\nif (!iterable) return result;\n"+a.top+";";a.array?(b+="\nvar length = iterable.length; index = -1;\nif ("+a.array+") {  ",ib.unindexedChars&&(b+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),b+="\n  while (++index < length) {\n    "+a.loop+";\n  }\n}\nelse {  "):ib.nonEnumArgs&&(b+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+a.loop+";\n    }\n  } else {  "),ib.enumPrototypes&&(b+="\n  var skipProto = typeof iterable == 'function';\n  "),ib.enumErrorProps&&(b+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var c=[];if(ib.enumPrototypes&&c.push('!(skipProto && index == "prototype")'),ib.enumErrorProps&&c.push('!(skipErrorProps && (index == "message" || index == "name"))'),a.useHas&&a.keys)b+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }  ";else if(b+="\n  for (index in iterable) {\n",a.useHas&&c.push("hasOwnProperty.call(iterable, index)"),c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }    ",ib.nonEnumShadows){for(b+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;7>k;k++)b+="\n    index = '"+a.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",a.useHas||(b+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),b+=") {\n      "+a.loop+";\n    }      ";b+="\n  }    "}return(a.array||ib.nonEnumArgs)&&(b+="\n}"),b+=a.bottom+";\nreturn result"};bb||(l=function(a){if(o(a)){d.prototype=a;var b=new d;d.prototype=null}return b||{}});var kb=_?function(a,b){K.value=b,_(a,"__bindData__",K)}:d;ib.argsClass||(m=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&W.call(a,"callee")||!1});var lb=cb||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Z.call(a)==B||!1},mb=j({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),nb=db?function(a){return o(a)?ib.enumPrototypes&&"function"==typeof a||ib.nonEnumArgs&&a.length&&m(a)?mb(a):db(a):[]}:mb,ob={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:nb,loop:"if (callback(iterable[index], index, collection) === false) return result"},pb={top:"if (!objectTypes[typeof iterable]) return result;\n"+ob.top,array:!1},qb=j(ob),rb=j(ob,pb,{useHas:!1});n(/x/)&&(n=function(a){return"function"==typeof a&&Z.call(a)==F});var sb=q;f.bind=r,f.createCallback=s,f.filter=q,f.forIn=rb,f.keys=nb,f.where=sb,f.select=q,f.identity=t,f.isArguments=m,f.isArray=lb,f.isFunction=n,f.isObject=o,f.isString=p,f.VERSION="2.2.1",O&&P&&(O._=f)}).call(this)},{}],40:[function(a,b){var c=a("./utils"),d={},e=function(){},f=function(a,b){var d=this;b="object"===c.type(b)?b:{},d.name=a,d.data={}},g=function(a,b){var c=this;return c.key=a,c.value=b,c};e.prototype.store=function(a){return d[a]instanceof f?d[a]:d[a]=new f(a)},e.prototype.destroy=function(a){var b=this,c=d[a]instanceof f?b.store(a):null;return c?c.destroy():!0},e.prototype.stores=function(){var a=[];for(var b in d)d.hasOwnProperty(b)&&a.push(d[b]);return a},f.prototype.destroy=function(){var a=this;return delete d[a.name]},f.prototype.all=function(){var a=this,b=a.data,c=[];for(var d in b)b.hasOwnProperty(d)&&c.push(b[d]);return c},f.prototype.set=function(a,b){var c=this;return c.data[a]=new g(a,b),c},f.prototype.get=function(a){var b=this;return b.data[a]},f.prototype.remove=function(a){var b=this;return delete b.data[a],b},f.prototype.find=function(a){var b=this;return a="object"===c.type(a)?a:{},c.where(b.all(),a)},b.exports=e},{"./utils":41}],41:[function(a,b){b.exports={type:a("type-component"),isEmpty:a("./isEmpty"),where:a("sc-wherejs")}},{"./isEmpty":42,"sc-wherejs":38,"type-component":43}],42:[function(a,b){var c=function(a){var b=!0;if("boolean"==typeof a)b=!1;else if(null===a)b=!0;else if("number"==typeof a)b=0===a;else if(void 0!==a.length)b=0===a.length;else for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b=!1);return b};b.exports=c},{}],43:[function(a,b){b.exports=a(13)},{}],44:[function(a,b){var c=a("./utils"),d=a("./sanitize"),e=a("./validate"),f=function(a){var b=this;return a="object"===c.type(a)?a:{},b.validate=new e(a.validate),this};f.prototype.sanitize=function(){return d.apply(this,arguments)},f.prototype.validateProperty=function(){return this.validate.validateProperty.apply(this,arguments)},f.prototype.validateObject=function(){return this.validate.validateObject.apply(this,arguments)},b.exports=f},{"./sanitize":45,"./utils":47,"./validate":49}],45:[function(a,b){function c(a,b){var c;return b=b instanceof Object?b:{},c=f(c={},b,a.properties)}var d=a("./utils"),e=function(a){return null===a||void 0===a},f=function(a,b,c){return c.forEach(function(c){var g,h,i=c.optional===!0;switch(!0){case/^object$/i.test(c.datatype)&&d.hasKey(c,"properties","array")||d.hasKey(c.datatype,"properties","array")||c.datatype[0]&&"object"===d.type(c.datatype[0]):var j=/^object$/i.test(c.datatype)?c.properties:c.datatype.properties;j=j||c.datatype,h="object"===d.type(b[c.key])?b[c.key]:null,i||(h=f(a[c.key]={},h||{},j));break;case"array"===d.type(c.datatype):if(h=null,g=d.cast(b[c.key],"array")||null,"array"===d.type(g))switch(h=[],!0){case/^guid$/i.test(c.datatype[0]):g.forEach(function(a){d.guid.isValid(a)&&h.push(a)});break;case d.hasKey(c.datatype[0],"properties","array")||"array"===d.type(c.datatype[0]):g.forEach(function(a){var b,d=c.datatype[0].properties?c.datatype[0].properties:c.datatype[0];b=f(b={},a||{},d),h.push(b)});break;case"string"===d.type(c.datatype[0]):g.forEach(function(a){var b=d.cast(a,c.datatype[0]);d.type(b)===c.datatype[0]&&h.push(b)})}break;case/^guid$/i.test(c.datatype):g=d.cast(b[c.key],"string")||"",g=d.guid.match(g),h="array"===d.type(g)&&g.length>0?g[0]:null;break;default:h=d.cast(b[c.key],c.datatype.toLowerCase(),c["default"])}h=e(h)&&c.hasOwnProperty("default")?c["default"]:h,e(h)&&i||(a[c.key]=h)}),a};b.exports=c},{"./utils":47}],46:[function(a,b){var c=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a};b.exports=c},{}],47:[function(a,b){b.exports={extend:a("./extend"),cast:a("sc-cast"),guid:a("sc-guid"),isEmpty:a("./isEmpty"),type:a("type-component"),hasKey:a("sc-haskey")}},{"./extend":46,"./isEmpty":48,"sc-cast":36,"sc-guid":11,"sc-haskey":14,"type-component":43}],48:[function(a,b){var c=function(a){var b=!0;if("boolean"==typeof a)b=!1;else if(null===a)b=!0;else if("number"==typeof a)b=0===a;else if(void 0!==a.length)b=0===a.length;else for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b=!1);return b};b.exports=c},{}],49:[function(a,b){function c(a,b,c){var d=new r(a,c);return d.validate(b)}function d(a,b,c){var d=new s(a,c);return d.validate(b)}function e(a){var b,e=this;a="object"===f.type(a)?a:{},b="object"===f.type(a.rules)?a.rules:{};for(var g in b)"function"===f.type(b[g])&&i.set(g,b[g]);e.validateProperty=c,e.validateObject=d,e.rulesStore=i}var f=a("./utils"),g=a("sc-storejs"),h=new g,i=h.store("rules"),j=function(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},k=function(a){var b=!1;switch(f.type(a)){case"array":b=a.length>0;break;case"boolean":b=!0;break;case"number":b=!0;break;case"object":b=Object.keys(a).length>0;break;case"string":b=a.length>0;break;default:b=a?!0:!1}return b},l=function(a,b){var c=!0;if(c=isNaN(a)?!1:!0,c&&b.length>0){var d=parseInt(a,10);c=d>b[0]&&d<b[1]?!0:!1}return c},m=function(a,b){result=!1;var c=new RegExp(b),d=c.test(a);return d&&(result=!0),result},n=function(a,b){var c=!0;if(!b)throw"Invalid rule: param is empty or undefined";if(b.length<1||b.length>2)throw"Invalid rule: rule must have 2 params";for(var d=0;d<b.length;d++)if(isNaN(b[d]))throw"Invalid rule: the param at "+d+" index is not a number";if(c)return"string"!=typeof a?!1:a.length>b[0]&&a.length<b[1]?!0:!1;throw"Invalid Rule"},o=function(a){return f.guid.isValid(a)},p=function(a){return function(b){return f.type(b)===a}};i.set("email",j),i.set("required",k),i.set("integer",l),i.set("string",n),i.set("regex",m),i.set("guid",o);var q=function(a){var b=i.get(a),c="object"===f.type(b)&&b.hasOwnProperty("value")&&"function"===f.type(b.value)?b.value:p(a);return c},r=function(a,b){var c=this;c.prefix=b||"",c.key=a.key,c.datatype=a.datatype,c.validators=a.validators||[],c.optional=a.optional===!0,c.validators.forEach(function(a){a.fn=q(a.validatorName)})};r.prototype.validate=function(a){var b=[],c=this;return c.validators.forEach(function(d){var e=void 0===a&&c.optional===!0?!1:!0,g=!1;"array"===f.type(c.datatype)?(g="array"!==f.type(a),!g&&/^required$/i.test(d.validatorName)&&0===a.length&&(g=!0),g||a.forEach(function(a){g||d.fn(a,d.param)||(g=!0)})):g=!d.fn(a,d.param),e&&g&&b.push({type:d.validatorName,message:d.errorMessage||""})}),b};var s=function(a,b){var c=this;c.properties=a.properties,c.validators=[],c.type="Object",c.key=b||"",c.prefix=b?b+".":"",c.properties.forEach(function(a){c.validators.push(/^object$/i.test(a.datatype)||f.hasKey(a.datatype,"properties","array")?new s(/^object$/i.test(a.datatype)?a:a.datatype,a.key):new r(a,b))})};s.prototype.validate=function(a){var b={},c=this;return a=a||{},c.validators.forEach(function(d){var e=d.validate(a[d.key]);if(d instanceof r)b[c.prefix+d.key]=e.length>0?e:void 0;else for(var f in e)e.hasOwnProperty(f)&&(b[c.prefix+f]=e[f])}),b},b.exports=e},{"./utils":47,"sc-storejs":40}],50:[function(a,b){var c=a("sc-bindingjs"),d=a("sc-is"),e=function(a){var b=!1;for(var c in a)a.hasOwnProperty(c)&&a[c]&&!b&&(b=!0);return b},f=function(a,b){var c=(d.nullOrUndefined(a)||""===a)&&(d.nullOrUndefined(b)||""===b),e=a===b;return c||e?!1:!0},g=function(a,b){var c={},d=!1;for(var e in a)a.hasOwnProperty(e)&&(f(a[e],b[e])?(d=!0,c[e]=!0):c[e]=!1);return c},h=function(a){Object.defineProperties(a,{__trackable:{value:!0},__properties:{writable:!0},__original:{writable:!0},hasChanged:{value:function(a){var b,c=this;if(a&&!c.__original.hasOwnProperty(a))throw"invalid property name";return b=g.apply(c,[c.__original,c]),a?b[a]:e(b)}},resetOriginalValues:{value:function(){var a=this;a.__original=JSON.parse(JSON.stringify(a.__properties))}},revertChanges:{value:function(){var a=this;for(var b in a.__original)a.__original.hasOwnProperty(b)&&(a[b]=a.__original[b])}}})},i=function(a){var b=a;b.__trackable!==!0&&(b.__observable!==!0&&c.observable(b),h(b),b.resetOriginalValues(),b.subscribe("any",function(a){if(g.apply(b,[b.__original,a]),"function"==typeof b.save){var c=b.save();d.an.object(c)&&"function"==typeof c.execute&&c.execute().then(function(){"function"==typeof b.emit&&b.emit("save")}).fail(function(a){b.emit("save",a)})}}),"function"==typeof b.on&&b.on("save",function(a){a||b.resetOriginalValues()}))};b.exports=i},{"sc-bindingjs":5,"sc-is":16}],51:[function(a,b){b.exports={defaults:{middlewareKey:"all"}}},{}],52:[function(a,b){var c=a("sc-is"),d=a("./config.json"),e=function(){},f=function(a,b,d){return c.not.empty(b)&&c.a.string(b)?(c.not.an.array(a[b])&&(a[b]=[]),c.a.func(d)&&a[b].push(d),a[b]):void 0},g=function(){this.functions={all:[]}};g.prototype.use=function(){var a=this,b=Array.prototype.slice.call(arguments),g=c.a.string(b[0])?b.shift():d.defaults.middlewareKey,h=c.a.func(b[0])?b.shift():e;f(a.functions,g,h)},g.prototype.middleware=function(){var a=this,b=0,g=Array.prototype.slice.call(arguments),h=c.a.string(g[0])&&c.a.func(g[1])?g.shift():d.defaults.middlewareKey,i=c.a.func(g[0])?g.shift():e;f(a.functions,h);var j=function(){var c=a.functions[h][b++],d=Array.prototype.slice.call(arguments);c?(d.push(j),c.apply(a.context,d)):i.apply(a.context,d)};j.apply(a.context,g)},g.prototype.clear=function(a){c.a.string(a)&&c.not.empty(a)?this.functions[a]=[]:this.functions={all:[]}},b.exports=function(a){var b=new g;c.an.object(a)?(Object.defineProperties(a,{use:{value:function(){return b.use.apply(b,arguments),a}},middleware:{value:function(){b.middleware.apply(b,arguments)}},useify:{value:b}}),b.context=a):c.a.fn(a)&&(a.prototype.middleware=function(){b.context=this,b.middleware.apply(b,arguments)},a.use=function(){return b.use.apply(b,arguments),this},a.useify=b)}},{"./config.json":51,"sc-is":16}],53:[function(a,b){b.exports={metadataValidatorScriptEndPoint:"/sitecore/api/ssc/script/metadata",metadataValidatorScriptEndPointParamName:"scripts",metadata:{properties:[{key:"entity",datatype:"object",validators:[{validatorName:"required",errorMessage:"An entity object is required"}],properties:[{key:"properties",datatype:"array",validators:[{validatorName:"array",errorMessage:"The entity object requires a properties key as an array"}]},{key:"key",datatype:"string",validators:[{validatorName:"required",errorMessage:"The entity object requires a key to define which property to assign id's to"}]}]}]}}},{}],54:[function(a,b){var c=a("./utils"),d=a("sc-data"),e=a("q"),f=a("sc-trackable"),g=a("sc-schemajs"),h=a("sc-bindingjs"),i=function(a,b,d){var e=a;Object.defineProperties(e,{__schema:{value:{ENTITY:c.getEntitySchemaByType(d),GETBYID:c.getEntitySchemaByType(d,"GET"),SAVE:c.getEntitySchemaByType(d,"PUT"),CREATE:c.getEntitySchemaByType(d,"POST"),REMOVE:c.getEntitySchemaByType(d,"DELETE")}},isNew:{get:function(){var a=this;return c.is.empty(a[a.__schema.ENTITY.key])}}})},j=d.Item.extend({init:function(a,b,d){var e=this;if(d=c.is.an.object(d)?d:{},d.raw=d.raw===!0,d.binding=d.binding===!1?!1:!0,d.trackable=d.trackable===!0,d.url=c.is.a.string(d.url)?d.url:"",d.headers=c.is.an.object(d.headers)?d.headers:{},d.raw===!0&&(d.binding===!0||d.trackable===!0))throw new Error("An entity cannot be raw and have a binding or be trackable");b=c.is.an.object(b)?b:{},a=c.is.an.object(a)?a:{},e._super(a,d),i(e,a,b),Object.keys(a).forEach(function(b){e[b]=a[b]}),d.binding===!0&&d.raw===!1&&h.observable(e),d.trackable===!0&&e.trackable()},destroy:function(){var a=this,b=e.defer();return c.request({type:"DELETE",url:a.option("url"),data:a.json(),header:a.options.headers}).then(function(){b.resolve(a)}).fail(b.reject),b.promise},isValid:function(a){var b=this,c=!0,d=b.validate(a);return Object.keys(d).forEach(function(a){c&&void 0!==d[a]&&(c=!1)}),c},json:function(){var a=this;return json=a._super(c.pick(a,c.metadata.getRootKeysAsArray(a.__schema.ENTITY)))},save:function(a){var b=this,d=e.defer();if(a=c.is.an.object(a)?a:{},b.isTrackable){if(b.hasChanged(b.__schema.ENTITY.key)||b.hasChanged()===!1)return b;if(b.isValid()===!1){var f=b.validate(),g=!1;if(b.isNew&&(f[b.__schema.ENTITY.key]=void 0),Object.keys(f).forEach(function(a){void 0!==f[a]&&(g=!0)}),g)return b.emit("save",f),b}}return c.request({type:b.isNew?"POST":"PUT",url:b.option("url"),data:b.json(),header:b.options.headers}).then(function(a){if(c.is.empty(b[b.__schema.ENTITY.key])){if(!c.hasKey(a,"__id","string")||c.is.empty(a.__id))throw new Error("While creating an entity, the server did not return a valid id");b[b.__schema.ENTITY.key]=a.__id}b.emit("save"),d.resolve(b)}).fail(function(a){b.emit("save",a),d.reject(a)}),d.promise},trackable:function(){var a=this;return a.option("raw")===!0?a:(f(a),a)},validate:function(a){var b=this,c=new g;return a=a||"ENTITY",b.option("validate")===!1||void 0===b.__schema.ENTITY?{}:c.validateObject(b.__schema[a],b)}});b.exports=j},{"./utils":63,q:4,"sc-bindingjs":5,"sc-data":7,"sc-schemajs":44,"sc-trackable":50}],55:[function(a,b,c){{var d=a("q"),e=a("sc-data"),f=a("./sc-query"),g=a("./utils"),h=a("sc-schemajs"),i=a("./entity");g.merge(a("./config.json"),e.config)}a("./middleware");var j=e.extend({init:function(a){var b=this;b._super(a),b.hasMetaData=!1,b.metadata=null},create:function(a,b){var c,e,j,k=this,l=d.defer(),m=new h;switch(b=g.is.an.object(b)?b:{},b.url=g.is.a.string(b.url)&&!g.is.empty(b.url)?b.url:k.url,b.trackable=g.is.a.boolean(b.trackable)?b.trackable:k.options.trackable,b.binding=g.is.a.boolean(b.binding)?b.binding:k.options.binding,b.raw=g.is.a.boolean(b.raw)?b.raw:k.options.raw,b.headers=g.is.an.object(b.headers)?b.headers:k.options.headers,!0){case g.is.not.null(a)&&g.is.an.object(a):j=new f(b.url,"POST",b),j.parameters(a).option("url",b.url).option("entityService",k),e=j;break;case g.is.empty(a):k.loadMetadata().then(function(){c=new i(m.sanitize(k.metadata.entity,{}),k.metadata,b),l.resolve(c)
}).fail(l.reject),e=l.promise}return e},fetchEntity:function(a,b){var c=this;b=g.is.an.object(b)?b:{},b.headers=g.is.an.object(b.headers)?b.headers:c.options.headers;var d=new f(c.url,c.type,b);return d.option("url",c.url).option("entityService",c).option("single",!0).parameter("id",a),c.loadMetadata(),d},fetchEntities:function(a){var b=this;a=g.is.an.object(a)?a:{},a.headers=g.is.an.object(a.headers)?a.headers:b.options.headers;var c=new f(b.url,b.type,a);return c.option("url",b.url).option("entityService",b),b.loadMetadata(),c},loadMetadata:function(){var a=this,b=d.defer();if(!a.metadataLoading)return a.hasMetaData?(b.resolve(a.metadata),a.emit("metadata:loaded",null,a.metadata)):(a.metadataLoading=!0,g.request({url:a.url,type:"OPTIONS",header:a.options.headers||{}}).then(function(c){var d;return g.hasKey(c,"entity","object")===!1?(d=new Error("The server did not return a valid metadata object"),b.reject(d),void a.emit("metadata:loaded",d)):void g.metadataValidator.add(c.entity).then(function(){a.metadataLoading=!1,a.hasMetaData=!0,a.metadata=c,b.resolve(a.metadata),a.emit("metadata:loaded",null,a.metadata)}).fail(function(){b.reject(new Error("There was an error loading the custom validators"))})}).fail(function(c){b.reject(c),a.emit("metadata:loaded",c)})),b.promise}});g.emitter(j.prototype),g.optionify(j.prototype),g.useify(j),c=b.exports=j,c.Entity=i,c.utils=g,"undefined"!=typeof window&&(window.EntityService=c)},{"./config.json":53,"./entity":54,"./middleware":56,"./sc-query":60,"./utils":63,q:4,"sc-data":7,"sc-schemajs":44}],56:[function(a){var b=a("sc-query"),c=a("../utils"),d=a("sc-schemajs"),e=a("sc-data"),f=c.merge(a("../config.json"),e.config);b.useify.clear("preRequest"),b.useify.clear("postRequest"),b.use("preRequest",a("./scQueryPreRequest")),b.use("postRequest",a("./scQueryPostRequest")),c.request.use("postRequest",a("./scRequestPostRequest")),function(){var a=new d,b=[];a.validate.rulesStore.all().forEach(function(a){b.push(a.key)}),c.metadataValidator.addButDoNotInject(b),c.metadataValidator.options.scriptEndPoint=f.metadataValidatorScriptEndPoint,c.metadataValidator.options.scriptEntPointParamName=f.metadataValidatorScriptEndPointParamName}()},{"../config.json":53,"../utils":63,"./scQueryPostRequest":57,"./scQueryPreRequest":58,"./scRequestPostRequest":59,"sc-data":7,"sc-query":28,"sc-schemajs":44}],57:[function(a,b){var c=a("../utils"),d=a("../entity"),e=a("sc-schemajs");b.exports=function(a,b){var f=this,g=c.is.object(f.options.entityService)?f.options.entityService:{},h=c.is.an.array(a)?a:[],i=c.is.an.object(a)?a:{},j=new e,k=f.options.raw===!0,l=f.options.entityService.hasMetaData===!0,m=[];switch(!0){case/^post$/i.test(f.type):if(!c.hasKey(i,"__id","string")||c.is.empty(i.__id))return b(new Error("While creating an entity, the server did not return a valid id"));i[f.options.entityService.metadata.entity.key]=i.__id,m=k||!l?i:new d(j.sanitize(f.options.entityService.metadata.entity,i),f.options.entityService.metadata,f.options);break;case f.options.single:m=k||!l?i:new d(j.sanitize(f.options.entityService.metadata.entity,i),f.options.entityService.metadata,f.options);break;case!f.options.single:h.forEach(function(a){m.push(k||!l?a:new d(j.sanitize(f.options.entityService.metadata.entity,a),f.options.entityService.metadata,f.options))})}c.hasKey(g,"middleware","function")&&g.middleware(function(a,c){b(a,c)},m)}},{"../entity":54,"../utils":63,"sc-schemajs":44}],58:[function(a,b){var c=a("../utils"),d=(a("../entity"),a("sc-schemajs")),e=a("sc-data"),f=c.merge(a("../config.json"),e.config);b.exports=function(a,b){var e=this,g=c.is.object(e.options.entityService)?e.options.entityService:{},h=g.hasOwnProperty("metadata")&&!g.metadata?!0:!1;h?(g.loadMetadata(),g.once("metadata:loaded",function(c,e){if(c)return b(c);var g=new d,h=g.validateObject(f.metadata,e),i=!1;Object.keys(h).forEach(function(a){i===!1&&void 0!==h[a]&&(i=!0)}),i===!0?b(new Error("The metadata returned by the server is invalid")):b(null,a)})):b(null,a)}},{"../config.json":53,"../entity":54,"../utils":63,"sc-data":7,"sc-schemajs":44}],59:[function(a,b){var c=a("../utils"),d=function(a){var b=a.split("/"),c=a.lastIndexOf("/")===a.length-1,d=c?b.length-2:b.length-1;return b[d]};b.exports=function(a,b,e){if(c.hasKey(b,"req.method","string")&&/^post$/i.test(b.req.method)){var f=c.hasKey(b,"header.location","string")?b.header.location:"",g=d(f),h=c.is.empty(g)?null:g;h?(b.body=c.is.an.object(b.body)?b.body:{},b.body.__id=h):a=new Error("While creating the entity the server did not return a valid Id")}e(a,b)}},{"../utils":63}],60:[function(a,b,c){var d,e=a("sc-query"),d=(a("../utils"),e.extend({init:function(){this._super.apply(this,arguments),this.__url=this.url}}));c=b.exports=d,c.utils=e.utils,c.config=e.config,c.useify=e.useify,c.use=e.use},{"../utils":63,"sc-query":28}],61:[function(a,b){var c=a("sc-haskey"),d=function(a,b){var d=c(a,"entity.properties","array")?a.entity:void 0,e=c(a,"actions."+b+".properties","array")?a.actions[b]:void 0;return e||d};b.exports=d},{"sc-haskey":14}],62:[function(a,b){b.exports=function(a,b,c){return{sanitizedEntities:a,sanitizedEntity:b,res:c}}},{}],63:[function(a,b){b.exports={emitter:a("emitter-component"),getEntitySchemaByType:a("./getEntitySchemaByType"),getResponseObject:a("./getResponseObject"),guid:a("sc-guid"),hasKey:a("sc-haskey"),is:a("sc-is"),merge:a("sc-merge"),metadata:a("./metadata"),metadataValidator:a("./metadataValidator"),omit:a("sc-omit"),optionify:a("sc-optionify"),pick:a("sc-pick"),request:a("sc-request"),useify:a("sc-useify"),validator:a("./validator")}},{"./getEntitySchemaByType":61,"./getResponseObject":62,"./metadata":65,"./metadataValidator":64,"./validator":66,"emitter-component":2,"sc-guid":11,"sc-haskey":14,"sc-is":16,"sc-merge":22,"sc-omit":24,"sc-optionify":25,"sc-pick":26,"sc-request":31,"sc-useify":52}],64:[function(a,b){var c=a("Q"),d={},e=function(a){return"object"==typeof a&&!Array.isArray(a)},f=function(a){var b={},c=function(a){a=Array.isArray(a)?a:[],a.forEach(function(a){var d;a=e(a)?a:{},d=Array.isArray(a.validators)?a.validators:[],d.forEach(function(a){a=e(a)?a:{},b.hasOwnProperty(a.validatorName)||(b[a.validatorName]=!0)}),c(a.properties)})};return a=e(a)?a:{},c(a.properties),Object.keys(b)},g=function(a){var b,d=this,e=c.defer(),f=d.options.scriptEndPoint+"?"+d.options.scriptEntPointParamName+"="+encodeURIComponent(a.join(","));return"undefined"!=typeof window&&(b=document.createElement("script"),b.type="text/javascript",b.async=!0,b.src=f,b.onload=e.resolve,b.onerror=e.reject,document.getElementsByTagName("body")[0].appendChild(b)),e.promise},h=function(a){var b=[];return a=Array.isArray(a)?a:[],a.forEach(function(a){d.hasOwnProperty(a)||(b.push(a),d[a]=!0)}),b},i=function(){var a=this;a.options={scriptEndPoint:"./",scriptEntPointParamName:"scripts"},Object.defineProperty(a,"validators",{get:function(){return Object.keys(d)}})};i.prototype.add=function(a){var b=this,d=c.defer(),e=f(a),i=h(e);return i.length>0?g.apply(b,[i]).then(function(){d.resolve(i)}).fail(d.reject):d.resolve([]),d.promise},i.prototype.addButDoNotInject=function(a){h(a)},i.prototype.get=function(a){return d[a]||null},b.exports=new i},{Q:1}],65:[function(a,b,c){var d=a("sc-haskey");c.getRootKeysAsArray=function(a){var b=[],c=d(a,"properties","array")?a.properties:[];return c.forEach(function(a){d(a,"key","string")&&b.push(a.key)}),b}},{"sc-haskey":14}],66:[function(a,b,c){var d=a("sc-schemajs");c.add=function(a,b){var c=new d,e=c.validate.rulesStore;e.set(a,b)}},{"sc-schemajs":44}]},{},[55])(55)});